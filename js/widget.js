!function(){function t(t,e,o,n){Object.defineProperty(t,e,{get:o,set:n,enumerable:!0,configurable:!0})}var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},o={},n={},s=e.parcelRequire693d;null==s&&((s=function(t){if(t in o)return o[t].exports;if(t in n){var e=n[t];delete n[t];var s={id:t,exports:{}};return o[t]=s,e.call(s.exports,s,s.exports),s.exports}var r=new Error("Cannot find module '"+t+"'");throw r.code="MODULE_NOT_FOUND",r}).register=function(t,e){n[t]=e},e.parcelRequire693d=s),s.register("jHnDr",(function(e,o){var n,s;t(e.exports,"register",(function(){return n}),(function(t){return n=t})),t(e.exports,"resolve",(function(){return s}),(function(t){return s=t}));var r={};n=function(t){for(var e=Object.keys(t),o=0;o<e.length;o++)r[e[o]]=t[e[o]]},s=function(t){var e=r[t];if(null==e)throw new Error("Could not resolve bundle with id "+t);return e}})),s.register("aQK74",(function(e,o){t(e.exports,"sendAnalyticsToExternalSource",(function(){return S})),t(e.exports,"setImpressionByPublishId",(function(){return N})),t(e.exports,"registerSiteActivityListenerIfNeeded",(function(){return _})),t(e.exports,"sendPageVisitEvent",(function(){return O}));var n=s("50h3S"),r=s("8ptJJ"),i=s("kCbDV"),a=s("bvKjB"),c=s("93NPo"),l=s("dNsZ9"),d=s("tZRsn"),u=s("i1NbZ"),p=s("kK0IS"),E=s("eSOI5"),g=s("6QfcD");const h=t=>`tolstoy${(0,c.uppercaseFirstChar)(t)}`,S=t=>{y(t),f(t)},f=t=>{const{data:{name:e,text:o,facebookAnalyticsID:s,playlist:r,collectInfoType:i}}=t;if(!window.fbq||!s||!r)return;const a=`tolstoy-${r}`;switch(e){case n.PLAYER_EVENT_NAMES.sessionStart:T(s,`${a}-click`,{value:"Start Tolstoy"});break;case n.PLAYER_EVENT_NAMES.clickCta:T(s,`${a}-click`,{value:o});break;case n.PLAYER_EVENT_NAMES.submitInput:T(s,`${a}-input`,{value:o});break;case n.PLAYER_EVENT_NAMES.collectInfo:T(s,`${a}-${n.PLAYER_EVENTS.collectInfo}`,{value:i});break;case n.PLAYER_EVENT_NAMES.videoResponse:T(s,`${a}-${n.PLAYER_EVENTS.videoResponse}`);break;case n.PLAYER_EVENT_NAMES.imageResponse:T(s,`${a}-${n.PLAYER_EVENTS.imageResponse}`);break;case n.PLAYER_EVENT_NAMES.audioResponse:T(s,`${a}-${n.PLAYER_EVENTS.audioResponse}`);break;case n.PLAYER_EVENTS.sessionEnd:T(s,`${a}-${n.PLAYER_EVENTS.sessionEnd}`)}},T=(t,e,o)=>{window.fbq("trackSingleCustom",t,e,o)},y=t=>{const{data:{name:e,text:o,googleAnalyticsID:s,playlist:r,collectInfoType:i,productNames:c,totalTime:l,videoName:d,type:u,direction:p}}=t;if(!window.gtag&&!window.dataLayer&&!window.ga||!s||!r)return;const E=`tolstoy-${r}`;switch(e){case a.EVENT_NAMES.pageView:break;case n.PLAYER_EVENTS.sessionStart:case n.PLAYER_EVENT_NAMES.sessionStart:I(s,E,n.PLAYER_EVENT_NAMES.sessionStart),I(s,E,"click","Start Tolstoy");break;case n.PLAYER_EVENT_NAMES.clickCta:I(s,E,e,o);break;case n.PLAYER_EVENT_NAMES.collectInfo:I(s,E,e,i);break;case n.PLAYER_EVENT_NAMES.submitInput:case n.PLAYER_EVENT_NAMES.imageResponse:case n.PLAYER_EVENT_NAMES.audioResponse:case n.PLAYER_EVENT_NAMES.videoResponse:case n.PLAYER_EVENT_NAMES.sessionEnd:I(s,E,e);break;case a.EVENT_NAMES.tolstoyModalClose:I(s,E,a.EVENT_NAMES.tolstoyModalClose,l);break;case a.EVENT_NAMES.videoLoaded:c&&I(s,E,"tolstoyVideoLoaded-products",c),I(s,E,"tolstoyVideoLoaded-videoName",d);break;case a.EVENT_NAMES.feedProductModalOpen:case a.EVENT_NAMES.feedProductModalClose:case a.EVENT_NAMES.clickViewProduct:case a.EVENT_NAMES.openProductPageClick:I(s,E,h(e),c);break;case a.EVENT_NAMES.feedPlay:case a.EVENT_NAMES.feedPause:case a.EVENT_NAMES.videoMuted:case a.EVENT_NAMES.videoUnmuted:case a.EVENT_NAMES.videoWatched:I(s,E,h(e),d);break;case a.EVENT_NAMES.openShareLink:I(s,E,h("openShareLink"),u);break;case a.EVENT_NAMES.feedNavigationArrowClick:case a.EVENT_NAMES.feedScroll:I(s,E,h(e),p);break;default:I(s,E,h(e),o)}},I=(t,e,o,n)=>{A()&&(window.gtag?window.gtag("event",o,{event_category:e,event_label:n,send_to:t}):window.dataLayer&&window.dataLayer.push({event:o,event_category:e,event_label:n,send_to:t}))},m={},N=(t,e)=>{m[t]=m[t]||e};let w=!1;const _=()=>{if(!w)try{const t=(0,g.getAppKey)();b({appKey:t}),w=!0}catch(t){console.error(t),window.tolstoyCaptureError?.(t)}},A=()=>!window.Shopify?.customerPrivacy?.shouldShowBanner()||"yes"===window.Shopify?.customerPrivacy?.currentVisitorConsent().analytics,b=({appKey:t}={})=>{let e=0,o=!1;if((0,E.setNotVisibileOpenedTolstoyPublishId)(null),!(0,l.validateUUID)(t))return;const n=({now:n,performanceNow:s})=>{o=!1;let r=(0,E.getTolstoysActivity)();L(n,r),r=(0,E.getTolstoysActivity)();const a=Math.round(s-e),c=(0,E.getSessionUniqueId)(),l=v(r),d=window.location.href.split("?")[0],g=(0,u.getCurrentPageProductId)(),h={appKey:t,sessionUniqueId:c,timestamp:(new Date).toISOString(),anonymousId:(0,E.getAndSetAnonymousId)(),storeUrl:window.Shopify?.shop,siteActivity:l,eventName:i.SITE_ACTIVITY_EVENT_NAME,timeOnPage:a,pageUrl:d,currentPageProductId:g};(0,p.createSiteActivityEvent)(h),o=!0,(0,E.clearTolstoyActivity)()};document.addEventListener("visibilitychange",(()=>{try{const t=Date.now(),s=window.performance.now();"visible"===document.visibilityState&&(e=s,o=!1,R(t)),"hidden"!==document.visibilityState||o||n({now:t,performanceNow:s})}catch(t){console.error(t),window.tolstoyCaptureError?.(t)}})),window.addEventListener("beforeunload",(()=>{if(!o)try{const t=Date.now(),e=window.performance.now();n({now:t,performanceNow:e})}catch(t){console.error(t),window.tolstoyCaptureError?.(t)}}))},v=t=>{const e={};for(const[o,n]of Object.entries(m)){const s=t[o];s?.length||e[o]||(e[o]={activity:{},totalTime:0,impression:n});const r=C({publishId:o,activities:s});let i=0;for(const t of Object.values(r))i+=t;e[o]={activity:r,totalTime:i,impression:n}}return e},C=({publishId:t,activities:e})=>{if(!t||!e?.length)return{};const o=Date.now(),n={},s={};for(const{timeStamp:t,type:o,sessionId:r}of e)s[r]=s[r]||0,void 0===n[r]&&(n[r]=!1),(0,d.getIsActiveWidgetEvent)(o)&&!n[r]&&(n[r]=!0,s[r]-=t),(0,d.getIsInactiveWidgetEvent)(o)&&n[r]&&(n[r]=!1,s[r]+=t);for(const[t,e]of Object.entries(n))e&&(s[t]+=o),(s[t]<=0||s[t]>864e5)&&delete s[t];return s},R=t=>{const e=(0,E.getNotVisibleOpenedTolstoyPublishId)(),o=(0,E.getSessionId)();e&&o&&((0,E.pushTolstoyActivity)({publishId:e,timeStamp:t,type:r.WIDGET_MESSAGES_EVENTS.OPEN,sessionId:o}),(0,E.setNotVisibileOpenedTolstoyPublishId)(null))},L=(t,e)=>{const o=(t=>Object.entries(t).find((([t,e])=>{if(0===e.length)return;const o=e[e.length-1].type;return(0,d.getIsActiveWidgetEvent)(o)}))?.[0])(e),n=(0,E.getSessionId)();o&&n&&((0,E.pushTolstoyActivity)({publishId:o,timeStamp:t,type:r.WIDGET_MESSAGES_EVENTS.CLOSE,sessionId:n}),(0,E.setNotVisibileOpenedTolstoyPublishId)(o))},O=()=>{const t=(0,g.getAppKey)();if(!t)return;const e=window.location.href.split("?")[0],o=(0,u.getCurrentPageProductId)(),n={appKey:t,sessionUniqueId:(0,E.getSessionUniqueId)(),createdAt:(new Date).toISOString(),anonymousId:(0,E.getAndSetAnonymousId)(),appUrl:window.Shopify?.shop,eventName:i.PAGE_VISIT_EVENT_NAME,parentUrl:e,currentPageProductId:o};(0,p.createPageVisitEvent)(n)}})),s.register("50h3S",(function(e,o){t(e.exports,"PLAYER_EVENTS",(function(){return n})),t(e.exports,"PLAYER_EVENT_NAMES",(function(){return s}));const n={pageView:"pageView",sessionStart:"sessionStart",sessionEnd:"sessionEnd",videoPause:"videoPause",videoStart:"videoStart",videoResume:"videoResume",videoReplay:"videoReplay",clickCta:"clickCta",submitInput:"submitInput",collectInfo:"collectInfo",videoResponse:"videoResponse",audioResponse:"audioResponse",imageResponse:"imageResponse",tolstoyClick:"tolstoyClick",chapterSelected:"chapterSelected",chapterPickerOpened:"chapterPickerOpened",videoSeeked:"videoSeeked",shareClick:"shareClick",quizResult:"quizResult",autoplayStart:"autoplayStart"},s={sessionStart:"tolstoyStarted",sessionEnd:"tolstoyReachedEnd",clickCta:"tolstoyAnswerClicked",submitInput:"tolstoyInputSubmit",collectInfo:"tolstoyLeadFormSubmit",videoResponse:"tolstoyVideoSubmit",audioResponse:"tolstoyAudioSubmit",imageResponse:"tolstoyImageSubmit",openGorgias:"tolstoyOpenGorgias",hideGorgias:"tolstoyHideGorgias",openIntercom:"tolstoyOpenIntercom",hideIntercom:"tolstoyHideIntercom",openTawkTo:"tolstoyOpenTawkTo",hideTawkTo:"tolstoyHideTawkTo",openLiveChat:"tolstoyOpenLiveChat",hideLiveChat:"tolstoyHideLiveChat",openHubSpot:"tolstoyOpenHubSpot",hideHubSpot:"tolstoyHideHubSpot",openHelpScout:"tolstoyOpenHelpScout",hideHelpScout:"tolstoyHideHelpScout",openDrift:"tolstoyOpenDrift",hideDrift:"tolstoyHideDrift",openZendesk:"tolstoyOpenZendesk",hideZendesk:"tolstoyHideZendesk"}})),s.register("8ptJJ",(function(e,o){t(e.exports,"TOLSTOY_ESCAPE_KEY_PRESSED_MESSAGE",(function(){return n})),t(e.exports,"TOLSTOY_WATCHED_PRODUCT_IDS_MESSAGE",(function(){return s})),t(e.exports,"SHOW_FEED_PRODUCT_MODAL_MESSAGE",(function(){return r})),t(e.exports,"WIDGETS_MESSAGES",(function(){return i})),t(e.exports,"SHOW_FEED_CART_MOBILE_MESSAGE",(function(){return a})),t(e.exports,"TOLSTOY_MOVE_TO_URL",(function(){return c})),t(e.exports,"TOLSTOY_CLOSE_MODAL_MESSAGE",(function(){return l})),t(e.exports,"TOLSTOY_PLAYER_READY_MESSAGE",(function(){return d})),t(e.exports,"WIDGET_MESSAGES_EVENTS",(function(){return u})),t(e.exports,"ACTIVE_WIDGET_MESSAGES_EVENTS",(function(){return p})),t(e.exports,"INACTIVE_WIDGET_MESSAGES_EVENTS",(function(){return E})),t(e.exports,"PRE_CONFIG_MESSAGES",(function(){return g})),t(e.exports,"RECHARGE_MESSAGING",(function(){return h})),t(e.exports,"RECHARGE_WIDGET_DATA_MESSAGE",(function(){return S})),t(e.exports,"REQUEST_RECHARGE_WIDGET_DATA_MESSAGE",(function(){return f})),t(e.exports,"REQUEST_RECHARGE_ADD_TO_CART_MESSAGE",(function(){return T}));const n="tolstoyEscapeKeyPressed",s="tolstoyWatchedProductIds",r="showFeedProductModal",i="tolstoyWidgets",a="showFeedCartMobile",c="tolstoyMoveToUrl",l="tolstoyCloseModalMessage",d="tolstoyPlayerReady",u={OPEN:"open",CLOSE:"close",PLAY:"play",PAUSE:"pause"},p=[u.OPEN,u.PLAY],E=[u.CLOSE,u.PAUSE],g={ready:"tolstoyPreConfigMessengerReady",vodAssetIds:"tolstoyVodAssetIds"},h="rechargeMessaging",S="tolstoyRechargeWidgetData",f="tolstoyRequestRechargeWidgetData",T="tolstoyRequestRechargeAddToCart"})),s.register("kCbDV",(function(e,o){t(e.exports,"CAROUSEL_EMBED_WIDGET",(function(){return d})),t(e.exports,"IN_TILE_CAROUSEL_EMBED_WIDGET",(function(){return u})),t(e.exports,"BUBBLE_WIDGET",(function(){return p})),t(e.exports,"STORY_EMBED_WIDGET",(function(){return E})),t(e.exports,"EMBED_WIDGET",(function(){return g})),t(e.exports,"ON_YOU_WIDGET",(function(){return h})),t(e.exports,"TILE_EMBED_WIDGET",(function(){return S})),t(e.exports,"CENTERED_MODAL_WIDGET",(function(){return f})),t(e.exports,"COLLECTION_TILE_EMBED_WIDGET",(function(){return T})),t(e.exports,"COLLECTION_PAGE_TILE_EMBED_WIDGET",(function(){return y})),t(e.exports,"STOP_SHOWING_WIDGET_TO",(function(){return I})),t(e.exports,"EMBED_WIDGETS_CLASSNAMES",(function(){return m})),t(e.exports,"SITE_ACTIVITY_EVENT_NAME",(function(){return N})),t(e.exports,"PAGE_VISIT_EVENT_NAME",(function(){return w})),t(e.exports,"DOM_EXCEPTION_ERRORS",(function(){return _})),t(e.exports,"DEFAULT_CART_QUANTITY",(function(){return A})),t(e.exports,"WIDGET_SCRIPT_PARAMETERS",(function(){return b})),t(e.exports,"URL_PARAMETERS",(function(){return v})),t(e.exports,"PLACEHOLDER_PRODUCT_ID",(function(){return C})),t(e.exports,"CAROUSEL_CREATOR_PROFILE_LINK_POSITION",(function(){return R}));var n=s("iG8TK"),r=s("hRKjm"),i=s("99pD6"),a=s("lPPKE"),c=s("4lhba"),l=s("fgRdL");const d="carousel",u="inTileCarousel",p="bubble",E="stories",g="embed",h="onYou",S="tile",f="centeredModal",T="collectionTile",y="collectionPageTile",I={clickedX:"stopShowingWidgetToClickedX",viewed:"stopShowingWidgetToViewed"},m={[d]:n.PUBLIC_CLASSES.carousel,[E]:i.PUBLIC_CLASSES.story,[g]:r.PUBLIC_CLASSES.embed,[S]:a.PUBLIC_CLASSES.tile,[T]:c.PUBLIC_CLASSES.collectionTile,[y]:l.PUBLIC_CLASS},N="siteActivity",w="pageVisit",_={notAllowedError:"NotAllowedError",abortError:"AbortError"},A=1,b={shop:"shop",appKey:"app-key",productId:"product-id",shouldUseCache:"should-use-cache",cacheVersion:"cache-version"},v={tolstoyAutoOpen:"tolstoyAutoOpen",tolstoyAutoOpenOnYou:"tolstoyAutoOpenOnYou",tolstoyStartVideo:"tolstoyStartVideo"},C="PRODUCT_ID",R={TOP:"top",BOTTOM:"bottom"}})),s.register("iG8TK",(function(e,o){t(e.exports,"EMBED_CAROUSEL_MOTION",(function(){return n})),t(e.exports,"CAROUSEL_TILE_NAME_LOCATION_TYPES",(function(){return s})),t(e.exports,"PUBLIC_CLASSES",(function(){return r})),t(e.exports,"MAX_TILE_NUMBER",(function(){return i})),t(e.exports,"MIN_TILE_NUMBER",(function(){return a})),t(e.exports,"MIN_WIDTH_FOR_TILE",(function(){return c})),t(e.exports,"DEFAULT_DOT_OPACITY",(function(){return l})),t(e.exports,"TILE_NAME_HEIGHT",(function(){return d})),t(e.exports,"SPACING_HORIZONTAL",(function(){return u})),t(e.exports,"DEFAULT_TILE_HEIGHT",(function(){return p})),t(e.exports,"CAROUSEL_TYPE",(function(){return E})),t(e.exports,"SPOTLIGHT_CAROUSEL_CONTENT_TILE_TYPE",(function(){return g})),t(e.exports,"CAROUSEL_TITLE",(function(){return h}));const n={static:"static",dynamic:"dynamic",hoverOver:"hoverOver"},s={under:"under",over:"over"},r={carousel:"tolstoy-carousel",carouselContainer:"tolstoy-carousel-container",title:"tolstoy-carousel-title",videoCarouselContainer:"tolstoy-video-carousel-container",previousButton:"tolstoy-previous-button",nextButton:"tolstoy-next-button",arrowsContainer:"tolstoy-carousel-arrows-container",videosContainer:"tolstoy-carousel-videos-container",videoContainer:"tolstoy-carousel-video-container",video:"tolstoy-carousel-video",image:"tolstoy-carousel-image",dotsContainer:"tolstoy-dots-container",dot:"tolstoy-dot",playButtonContainer:"tolstoy-play-button-container",controlsContainer:"tolstoy-carousel-controls-container",expandButton:"tolstoy-carousel-expand-button",muteButton:"tolstoy-carousel-mute-button",playButton:"tolstoy-carousel-play-button",tileContainer:"tolstoy-carousel-tile-container",tile:"tolstoy-carousel-tile",centerTile:"tolstoy-carousel-center-tile",tileNameContainer:"tolstoy-tile-name-container",tileNameText:"tolstoy-carousel-tile-name-text",arrowButtonContainer:"tolstoy-carousel-arrow-button-container",arrowButton:"tolstoy-carousel-arrow-button",tileNameHeightPlaceholder:"tolstoy-tile-name-height-placeholder",productTile:"tolstoy-product-tile",productContent:"tolstoy-product-content",productTileImage:"tolstoy-product-tile-image",productTileTitle:"tolstoy-product-tile-title",tileText:"tolstoy-tile-text",variantTile:"tolstoy-product-variant-tile",variantTileIcon:"tolstoy-product-variant-tile-icon",variantTileTitle:"tolstoy-product-variant-tile-title",productTilePrice:"tolstoy-product-tile-price",productTileSubtitle:"tolstoy-product-tile-subtitle",productTileButton:"tolstoy-product-tile-button",productTileArrow:"tolstoy-product-tile-arrow",productTileFallback:"tolstoy-product-tile-fallback",descriptionTile:"tolstoy-description-tile",descriptionTileContent:"tolstoy-description-tile-content",descriptionTileButton:"tolstoy-description-tile-button"},i=6,a=2,c=80,l=.3,d=80,u=12,p=416,E={DEFAULT:"default",SPOTLIGHT:"spotlight"},g={product:"product",videoName:"videoName",none:"none"},h={shoppableVideoCarousel:"Shoppable Video Carousel",viewProduct:"View Product"}})),s.register("hRKjm",(function(e,o){t(e.exports,"PUBLIC_CLASSES",(function(){return n})),t(e.exports,"ASPECT_RATIO_9_16",(function(){return s}));const n={embed:"tolstoy-embed",iframe:"tolstoy-embed-iframe",videoPreview:"tolstoy-embed-video-preview",videoContainer:"tolstoy-embed-video-container",playButtonContainer:"tolstoy-embed-play-button-container",startText:"tolstoy-embed-start-text",startButtonContainer:"tolstoy-embed-start-button-container",startButton:"tolstoy-embed-start-button",embedContainer:"tolstoy-embed-container"},s=.5625})),s.register("99pD6",(function(e,o){t(e.exports,"PUBLIC_CLASSES",(function(){return r})),t(e.exports,"POSTER_SUFFIX",(function(){return i})),t(e.exports,"STORIES_IMAGE_EXTENSION",(function(){return a})),t(e.exports,"EMBED_STORY_MOTION",(function(){return c})),t(e.exports,"STORIES_ITEMS_SIZE_TYPES",(function(){return l})),t(e.exports,"STORIES_NAME_LOCATION",(function(){return d})),t(e.exports,"DEFAULT_STORIES_ITEMS_SIZE_TYPE",(function(){return u})),t(e.exports,"DEFAULT_STORIES_ITEMS_PER_ROW",(function(){return p})),t(e.exports,"DEFAULT_STORIES_SIZE",(function(){return E})),t(e.exports,"DEFAULT_STORIES_SPACING",(function(){return g})),t(e.exports,"STORIES_ITEM_MAX_FIXED_SIZE",(function(){return h}));var n=s("iG8TK");const r={story:"tolstoy-stories",storiesMainContainer:"tolstoy-stories-main-container",storiesContainer:"tolstoy-stories-container",tilesContainer:"tolstoy-stories-tiles-container",tileName:"tolstoy-stories-tile-name",storyTile:"tolstoy-stories-tile",storyImage:"tolstoy-stories-story-image",storyVideo:"tolstoy-stories-story-video",plusTile:"tolstoy-stories-plus-tile",storyName:"tolstoy-stories-story-name",titleContainer:"tolstoy-stories-title",plusTileContainer:"tolstoy-stories-plus-tile-container",previousButton:"tolstoy-stories-previous-button",nextButton:"tolstoy-stories-next-button",onYouButton:"tolstoy-stories-on-you-button",onlyOnYouButton:"tolstoy-stories-only-on-you-button",playButtonContainer:"tolstoy-stories-play-button-container"},i=".0000000.jpg",a=`.avatar${i}`,c={static:n.EMBED_CAROUSEL_MOTION.static,dynamic:n.EMBED_CAROUSEL_MOTION.dynamic},l={responsive:"responsive",fixed:"fixed"},d={below:"below",overlay:"overlay"},u=l.fixed,p=8,E=80,g=8,h=256})),s.register("lPPKE",(function(e,o){t(e.exports,"PUBLIC_CLASSES",(function(){return n}));const n={tile:"tolstoy-tile",tileContainer:"tolstoy-tile-container",video:"tolstoy-tile-video",nativeCaptionsTrack:"tolstoy-tile-native-captions-track",customCaptionsTrack:"tolstoy-tile-custom-captions-track",imageOverlay:"tolstoy-tile-image-overlay",image:"tolstoy-tile-image",controlsOverlay:"tolstoy-tile-controls-overlay",controlsContainer:"tolstoy-tile-controls",playButtonOverlay:"tolstoy-tile-play-button-overlay",playButtonContainer:"tolstoy-tile-play-button-container",playButtonLabelContainer:"tolstoy-tile-play-button-label-container",playButtonLabel:"tolstoy-tile-play-button-label",timebarWrapper:"tolstoy-tile-timebar-wrapper",timebarContainer:"tolstoy-tile-timebar-container",timebar:"tolstoy-tile-timebar",timeIndicator:"tolstoy-tile-time-indicator",muteButton:"tolstoy-tile-mute-button",fullScreenButton:"tolstoy-tile-full-screen-button",togglesContainer:"tolstoy-tile-toggles",captionsButton:"tolstoy-tile-captions-button"}})),s.register("4lhba",(function(e,o){t(e.exports,"PUBLIC_CLASSES",(function(){return n})),t(e.exports,"PLAY_MODE",(function(){return s})),t(e.exports,"PLAY_VIDEOS",(function(){return r})),t(e.exports,"VIDEO_PLAYBACK_MODE",(function(){return i})),t(e.exports,"TILE_CLICK_MODE",(function(){return a})),t(e.exports,"TILE_DATA_KEY",(function(){return c}));const n={collectionTile:"tolstoy-collection-tile",video:"tolstoy-collection-tile-video",controlsContainer:"tolstoy-collection-tile-controls-container",playButton:"tolstoy-collection-tile-play-button",muteButton:"tolstoy-collection-tile-mute-button"},s={AUTOPLAY:"autoplay",CLICK:"click"},r={CONSECUTIVELY:"consecutively",SIMULTANEOUSLY:"simultaneously"},i={LOOP:"loop",PLAY_ONCE:"playOnce"},a={PDP:"pdp",PLAY:"play"},c="data-tolstoy-collection-tile-key"})),s.register("fgRdL",(function(e,o){t(e.exports,"PUBLIC_CLASS",(function(){return n}));const n="tolstoy-collection-page-tile"})),s.register("bvKjB",(function(e,o){t(e.exports,"EVENT_NAMES",(function(){return n}));const n={embedView:"embedView",embedPlay:"embedPlay",embedPause:"embedPause",embedMute:"embedMute",embedUnmute:"embedUnmute",embedExpand:"embedExpand",tolstoyModalClose:"tolstoyModalClose",feedProductModalOpen:"feedProductModalOpen",feedProductModalClose:"feedProductModalClose",videoLoaded:"videoLoaded",pageView:"pageView",clickViewProduct:"clickViewProduct",openProductPageClick:"openProductPageClick",feedPlay:"feedPlay",feedPause:"feedPause",videoMuted:"videoMuted",videoUnmuted:"videoUnmuted",videoWatched:"videoWatched",openShareLink:"Open Share Link",feedNavigationArrowClick:"feedNavigationArrowClick",feedScroll:"feedScroll",sessionStart:"sessionStart",abTestInitialized:"abTestInitialized",onYouClick:"onYouClick"}})),s.register("93NPo",(function(e,o){t(e.exports,"uppercaseFirstChar",(function(){return i})),t(e.exports,"getRandomNumberBetweenTwoIntegers",(function(){return a})),t(e.exports,"generateUUID",(function(){return c})),t(e.exports,"logDevelopmentMessage",(function(){return d})),t(e.exports,"logDevelopmentError",(function(){return u})),t(e.exports,"getIsIOS",(function(){return p})),t(e.exports,"getIsMobile",(function(){return E})),t(e.exports,"debounce",(function(){return g})),t(e.exports,"sleep",(function(){return h})),t(e.exports,"safeRoundNumber",(function(){return S})),t(e.exports,"removeHtmlTags",(function(){return f})),t(e.exports,"isNullOrUndefined",(function(){return T})),t(e.exports,"formatTime",(function(){return y}));var n=s("2Aomz"),r=s("k3iEx");const i=t=>t?.length?`${t[0]?.toUpperCase()}${t?.slice(1)}`:"",a=(t,e)=>Math.floor(Math.random()*(e-t+1))+t,c=()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(t=>{const e=Math.floor(16*Math.random());return("x"===t?e:3&e|8).toString(16)})),l=()=>"development"===n.NODE_ENV||"true"===(0,r.getSafeParameter)("td"),d=t=>{l()&&console.log(t)},u=t=>{l()&&console.error(t)},p=()=>["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document,E=()=>p()||window.screen.width<=450||window.screen.height<=450,g=(t,e=300)=>{let o;return(...n)=>{clearTimeout(o),o=setTimeout((()=>{t(...n)}),e)}},h=async(t=0)=>new Promise((e=>{setTimeout(e,t)})),S=(t,e=1)=>{const o=Number(t);return Number.isNaN(o)?0:Number.isInteger(o)?o:Number.parseFloat(o.toFixed(e))},f=t=>t.replace(/<[^>]*>?/gm,""),T=t=>null==t,y=t=>`${Math.floor(t/60)}:${Math.floor(t%60).toString().padStart(2,"0")}`})),s.register("2Aomz",(function(e,o){t(e.exports,"API_BASE_URL",(function(){return n})),t(e.exports,"API_LB_BASE_URL",(function(){return s})),t(e.exports,"API_LB_CDN_BASE_URL",(function(){return r})),t(e.exports,"PLAYER_URL",(function(){return i})),t(e.exports,"ON_YOU_URL",(function(){return a})),t(e.exports,"HERO_URL",(function(){return c})),t(e.exports,"WIDGET_DOMAIN",(function(){return l})),t(e.exports,"VIDEO_OUTPUT",(function(){return d})),t(e.exports,"CREATE_VIDEO_RESOLUTIONS",(function(){return u})),t(e.exports,"SITE_ACTIVITY_EVENT_URL",(function(){return p})),t(e.exports,"PAGE_VISIT_EVENT_URL",(function(){return E})),t(e.exports,"NODE_ENV",(function(){return g}));const n="https://api.gotolstoy.com",s="https://apilb.gotolstoy.com",r="https://cf-apilb.gotolstoy.com",i="https://player.gotolstoy.com",a="https://on-you.gotolstoy.com",c="https://play.gotolstoy.com/hero",l="widget.gotolstoy.com",d="https://videos.gotolstoy.com",u="https://api.gotolstoy.com/migrations/recreate-video",p="https://analytics-v2.gotolstoy.com/site-activity",E="https://analytics-v2.gotolstoy.com/page-visit",g="production"})),s.register("k3iEx",(function(e,o){t(e.exports,"getSafeParameter",(function(){return E})),t(e.exports,"isShopifyStore",(function(){return p})),t(e.exports,"getCustomerId",(function(){return h})),t(e.exports,"getEmailFromParams",(function(){return S})),t(e.exports,"getTolstoyAutoOpen",(function(){return f})),t(e.exports,"getTolstoyAutoOpenOnYou",(function(){return T})),t(e.exports,"getTolstoyStartVideo",(function(){return y})),t(e.exports,"getIframeSource",(function(){return m}));var n=s("eSOI5"),r=s("2Aomz"),i=s("kCbDV"),a=s("37dzN"),c=s("izL3O"),l=s("8ZCcc"),d=s("lUrCX"),u=s("lY4N9");const p=()=>Boolean(window.Shopify&&window.Shopify?.routes),E=t=>{if(!("URLSearchParams"in window))return null;try{return new URLSearchParams(window.location?.search).get(t)}catch(t){if(t)return null}},g=t=>t.playerLazy||E("pl"),h=()=>window._st?.cid||window.ShopifyAnalytics?.meta?.page?.customerId||"",S=()=>window.tolstoyUserInfo?.email||window.tolstoyUser,f=()=>E(i.URL_PARAMETERS.tolstoyAutoOpen)||window.tolstoyAutoOpen,T=()=>E(i.URL_PARAMETERS.tolstoyAutoOpenOnYou)||window.tolstoyAutoOpenOnYou,y=()=>E(i.URL_PARAMETERS.tolstoyStartVideo)||window.tolstoyStartVideo,I=({data:t,isFeed:e,isOnYou:o,email:s,isDynamic:r,modalId:f,tolstoyStartVideo:T})=>{const y=[`url=${`${window.location.origin}${window.location.pathname}`.slice(0,1999)}`,`modalId=${f}`],I=new URLSearchParams(window.location.search).get("authToken");I&&y.push(`authToken=${I}`);const m=s||S();if(m&&y.push(`email=${encodeURIComponent(m)}`),t.productId&&y.push(`productId=${t.productId}`),o){const e=localStorage.getItem("tolstoy-anonymousId"),o=window.Shopify?.shop||(0,c.getShop)();o&&y.push(`appUrl=${o}`),t.publishId&&y.push(`publishId=${t.publishId}`),e&&y.push(`tolstoyAnonymousId=${e}`);const s=(0,n.getSessionId)();s&&y.push(`sessionId=${s}`);const r=new URLSearchParams(window.location.search).get("returnParams");return r&&y.push(`returnParams=${r}`),y}t.currentProductDbId&&y.push(`currentPageDbProductId=${t.currentProductDbId}`);const N=window.Shopify?.shop||"",w=Boolean(p()&&N);if(y.push("host",`safari=${Boolean(window?.safari)}`,`dontDownload=${Boolean(t.dontDownload)}`,`playerType=${t.playerType}`,`isShopifyStore=${w}`,`shopifyStoreUrl=${N}`,`ai=${(0,n.getAndSetAnonymousId)()}`),p()){const t=window.Shopify?.routes?.root;t&&y.push(`shopifyRootRoute=${t}`)}window.tolstoyUserInfo?.name&&y.push(`name=${encodeURIComponent(window.tolstoyUserInfo.name)}`),window.tolstoyUserInfo?.phone&&y.push(`phone=${encodeURIComponent(window.tolstoyUserInfo.phone)}`),T&&y.push(`tolstoyStartVideo=${T}`),t.testGroup&&y.push(`group=${t.testGroup}`),t.sneakpeek&&y.push("sneakpeek"),t.sneakpeek_hidden&&y.push("sneakpeek_hidden"),t.token&&y.push(`token=${t.token}`),t.gclid&&y.push(`gclid=${t.gclid}`),t.widgetDelay&&y.push("delay"),!1===t.isShoppable&&y.push(`isShoppable=${t.isShoppable}`),t.si&&y.push(`si=${t.si}`);const _=E("td");_&&y.push(`td=${_}`);const A=g(t);A&&y.push(`pl=${A}`);const b=(v=t,v?.featureSettings?.[a.FEATURE_PLAYER_VERSION]?.version);var v;b&&y.push(`pv=${b}`);const C=(t=>t?.carouselEmbed?.carouselPlayInTileFirst?i.IN_TILE_CAROUSEL_EMBED_WIDGET:"")(t);C&&y.push(`playerVariant=${C}`),r&&y.push("isDynamic=true");const R=h();R&&y.push(`customerId=${R}`);const L=(0,d.getUrlCustomParams)();L.size>0&&y.push(L.toString());(0,u.getIsTapcart)()&&y.push("isTapcart=true");const O=(0,l.getPlayerOrigin)(t);return O&&t.publishId&&y.push(`publishId=${t.publishId}`),O&&e&&y.push("isFeed=true"),window.tolstoySettings?.shouldUseCache&&y.push(`shouldUseCache=${window.tolstoySettings?.shouldUseCache}`),window.tolstoySettings?.cacheVersion&&y.push(`cacheVersion=${window.tolstoySettings?.cacheVersion}`),y},m=({data:t,isFeed:e,isOnYou:o,email:n,isDynamic:s,modalId:i,tolstoyStartVideo:a})=>{const c=((t,e,o)=>{if(o)return`${r.ON_YOU_URL}`;const n=(0,l.getPlayerOrigin)(t);if(n){const e=E("td"),o=g(t);return e&&o?n.replace("2.0.0","2.0.0-ls"):o?n.replace("2.0.0","2.0.0-l"):e?n.replace("2.0.0","2.0.0-s"):n}let s=`${r.PLAYER_URL}`;return e&&(s+="/feed"),t.publishId&&(s+=`/${t.publishId}`),s})(t,e,o);return`${c}?${I({data:t,isFeed:e,isOnYou:o,email:n,isDynamic:s,modalId:i,tolstoyStartVideo:a}).join("&")}`}})),s.register("eSOI5",(function(e,o){t(e.exports,"getAndSetAnonymousId",(function(){return w})),t(e.exports,"setPublishId",(function(){return _})),t(e.exports,"getTolstoysActivity",(function(){return A})),t(e.exports,"pushTolstoyActivity",(function(){return b})),t(e.exports,"pushTolstoyViewedProducts",(function(){return v})),t(e.exports,"clearTolstoyActivity",(function(){return C})),t(e.exports,"setIsReply",(function(){return R})),t(e.exports,"setTolstoyProductRecommendation",(function(){return L})),t(e.exports,"getTolstoyViewers",(function(){return O})),t(e.exports,"setTolstoyViewers",(function(){return M})),t(e.exports,"getTolstoyInteractionDate",(function(){return D})),t(e.exports,"setIdentifyInfoId",(function(){return U})),t(e.exports,"getIdentifyInfoId",(function(){return V})),t(e.exports,"removeIdentifyInfoId",(function(){return k})),t(e.exports,"setSessionCounter",(function(){return B})),t(e.exports,"getSessionCounter",(function(){return H})),t(e.exports,"setFirstSeenAt",(function(){return W})),t(e.exports,"getFirstSeenAt",(function(){return F})),t(e.exports,"setTolstoyInteractionDate",(function(){return Y})),t(e.exports,"getTolstoyHideWidget",(function(){return $})),t(e.exports,"setTolstoyHideWidget",(function(){return j})),t(e.exports,"removeTolstoyHideWidget",(function(){return K})),t(e.exports,"getSessionId",(function(){return G})),t(e.exports,"setSessionId",(function(){return z})),t(e.exports,"removeSessionId",(function(){return q})),t(e.exports,"getSessionUniqueId",(function(){return X})),t(e.exports,"getNotVisibleOpenedTolstoyPublishId",(function(){return Q})),t(e.exports,"setNotVisibileOpenedTolstoyPublishId",(function(){return J})),t(e.exports,"updateTolstoyActivitySessionIdByPublishId",(function(){return tt})),t(e.exports,"getIsShopifyCartAnonymousIdSet",(function(){return et})),t(e.exports,"setIsShopifyCartAnonymousIdSet",(function(){return ot})),t(e.exports,"setTolstoyRecreateResolution",(function(){return nt})),t(e.exports,"getTolstoyRecreateResolution",(function(){return st})),t(e.exports,"setShowNotificationBadge",(function(){return rt})),t(e.exports,"getShowNotificationBadge",(function(){return it})),t(e.exports,"setShowBubbleText",(function(){return at})),t(e.exports,"getShowBubbleText",(function(){return ct})),t(e.exports,"setRecreateNewResolution",(function(){return lt})),t(e.exports,"getRecreateNewResolution",(function(){return dt})),t(e.exports,"setAbTestGroup",(function(){return ut})),t(e.exports,"getAbTestGroup",(function(){return pt}));var n=s("lY4N9"),r=s("hlJEM"),i=s("lxjfR"),a=s("fvcet");const{TOLSTOY_HIDE_WIDGET_STORAGE_KEY:c,TOLSTOY_SESSION_ID_KEY:l,TOLSTOY_SESSION_UNIQUE_ID_KEY:d,TOLSTOY_PRODUCT_RECOMMENDATIONS:u,TOLSTOY_ANONYMOUS_ID:p,TOLSTOY_REPLY:E,TOLSTOY_GROUP:g,TOLSTOY_PUBLISH_ID:h,TOLSTOY_ACTIVITY_KEY:S,TOLSTOY_NOT_VISIBLE_OPENED_PUBLISH_ID_KEY:f,TOLSTOY_INTERACTION_DATE:T,IS_SHOPIFY_CART_ANONYMOUS_ID_SET_KEY:y,TOLSTOY_RECREATE_RESOLUTIONS_PREFIX:I,TOLSTOY_AB_TEST_GROUP:m}=r.TOLSTOY_CACHE_KEYS;function N(t){return t?`${T}-${t}`:T}function w(){let t=((0,n.getIsTapcart)()?(0,n.getTapcartDeviceId)():null)||(0,i.getFromCache)(p)||(0,i.uuidv4)();return"false"===t&&(t=(0,i.uuidv4)()),function(t){t&&!["undefined","false"].includes(t)&&(0,i.setToCache)(p,t)}(t),t}function _(t){(0,i.setToCache)(h,t,!0)}function A(){return JSON.parse((0,i.getFromSessionStorage)(S)||"{}")}function b({publishId:t,timeStamp:e,type:o,sessionId:n}){const s=A()||{},r=s[t]||[];s[t]=[...r,{timeStamp:e,type:o,sessionId:n}],(0,i.setToSessionStorage)(S,JSON.stringify(s),!0)}const v=({publishId:t,productId:e})=>{const o=P(),n=o[e]||[],s={interactionDate:(new Date).toISOString(),publishId:t,productId:e};n.push(s),o[e]=n,x(o)},C=()=>{(0,i.setToSessionStorage)(S,"{}",!0)};function R(t){(0,i.setToCache)(E,t)}function L(){(0,i.setToCache)(u,!0)}const O=()=>JSON.parse((0,i.getFromLocalStorage)(a.Keys.TOLSTOY_VIEWERS_KEY)||"{}"),P=()=>JSON.parse((0,i.getFromCache)(a.Keys.TOLSTOY_VIEWED_PRODUCTS)||"{}"),x=t=>{(0,i.setToCache)(a.Keys.TOLSTOY_VIEWED_PRODUCTS,JSON.stringify(t))},M=t=>{(0,i.setLocalStorage)(a.Keys.TOLSTOY_VIEWERS_KEY,JSON.stringify(t))};function D(t){return(0,i.getFromCache)(N(t))||(0,i.getFromCache)(N())}function U(t){(0,i.setLocalStorage)(a.Keys.IDENTIFY_INFO_ID_KEY,t)}function V(){return(0,i.getFromLocalStorage)(a.Keys.IDENTIFY_INFO_ID_KEY)}function k(){localStorage.removeItem(a.Keys.IDENTIFY_INFO_ID_KEY)}const B=t=>{(0,i.setLocalStorage)(a.Keys.SESSION_COUNTER_KEY,t)},H=()=>Number((0,i.getFromLocalStorage)(a.Keys.SESSION_COUNTER_KEY)),W=t=>{(0,i.setLocalStorage)(a.Keys.FIRST_SEEN_AT_KEY,t)},F=()=>(0,i.getFromLocalStorage)(a.Keys.FIRST_SEEN_AT_KEY);function Y(t){const e=(new Date).toISOString();(0,i.setToCache)(N(t),e)}const $=t=>(0,i.getFromSessionStorage)(`${c}-${t}`),j=t=>(0,i.setToSessionStorage)(`${c}-${t}`,"true",!0),K=t=>window.sessionStorage.removeItem(`${c}-${t}`),G=()=>(0,i.getFromSessionStorage)(l),z=t=>(0,i.setToSessionStorage)(l,t,!0),q=()=>(0,i.removeFromSessionStorage)(l),X=()=>{const t=(0,i.getFromSessionStorage)(d);return t||Z()},Z=()=>{const t=(0,i.uuidv4)();return(0,i.setToSessionStorage)(d,t,!0),t},Q=()=>{const t=(0,i.getFromSessionStorage)(f);return t&&"null"!==t?t:null},J=t=>(0,i.setToSessionStorage)(f,t,!0),tt=(t,e)=>{const o=A()||{},n=o[t]||[];if(!n?.length)return;n[n.length-1].sessionId=e,(0,i.setToSessionStorage)(S,JSON.stringify(o),!0)},et=()=>(0,i.getFromSessionStorage)(y),ot=t=>(0,i.setToSessionStorage)(y,t),nt=t=>(0,i.setLocalStorage)(`${I}-${t}`,"true",!0),st=t=>(0,i.getFromLocalStorage)(`${I}-${t}`),rt=(t,e)=>(0,i.setLocalStorage)(`${a.Keys.NOTIFICATION_BADGE_PREFIX}-${t}`,e,!0),it=t=>(0,i.getFromLocalStorage)(`${a.Keys.NOTIFICATION_BADGE_PREFIX}-${t}`),at=(t,e,o)=>(0,i.setLocalStorage)(`${a.Keys.BUBBLE_TEXT_PREFIX}-${t}-${e}`,o,!0),ct=(t,e)=>(0,i.getFromLocalStorage)(`${a.Keys.BUBBLE_TEXT_PREFIX}-${t}-${e}`),lt=(t,e)=>(0,i.setLocalStorage)(`${a.Keys.RECREATE_NEW_RESOLUTION_PREFIX}-${t}`,e,!0),dt=t=>(0,i.getFromLocalStorage)(`${a.Keys.RECREATE_NEW_RESOLUTION_PREFIX}-${t}`),ut=(t,e)=>(0,i.setLocalStorage)(`${m}-${t}`,e,!0),pt=t=>(0,i.getFromLocalStorage)(`${m}-${t}`)})),s.register("lY4N9",(function(e,o){t(e.exports,"getIsTapcart",(function(){return n})),t(e.exports,"getTapcartDeviceId",(function(){return s}));const n=()=>!!window?.Tapcart?.isInitialized||!!document.location?.host?.includes("custom-blocks.tapcart.com"),s=()=>{const t=window?.Tapcart?.variables?.device?.id;return t?.toLowerCase()}})),s.register("hlJEM",(function(e,o){t(e.exports,"TOLSTOY_CACHE_KEYS",(function(){return n})),t(e.exports,"COOKIE_POLICIES",(function(){return s}));const n={TOLSTOY_HIDE_WIDGET_STORAGE_KEY:"tolstoy-hide-widget",TOLSTOY_SESSION_ID_KEY:"tolstoy-session-id",TOLSTOY_SESSION_UNIQUE_ID_KEY:"tolstoy-session-unique-id",TOLSTOY_PRODUCT_RECOMMENDATIONS:"tolstoy-product-recommendation",TOLSTOY_ANONYMOUS_ID:"tolstoy-anonymousId",TOLSTOY_REPLY:"tolstoy-reply",TOLSTOY_GROUP:"tolstoy-group",TOLSTOY_PUBLISH_ID:"tolstoy-publishId",TOLSTOY_ACTIVITY_KEY:"tolstoy-activity",TOLSTOY_NOT_VISIBLE_OPENED_PUBLISH_ID_KEY:"tolstoy-not-visible-opened-publish-id",TOLSTOY_INTERACTION_DATE:"tolstoy-interaction-date",IS_SHOPIFY_CART_ANONYMOUS_ID_SET_KEY:"tolstoy-is-shopify-cart-anonymous-id-set",TOLSTOY_COOKIE_POLICY:"tolstoy-cookie-policy",TOLSTOY_RECREATE_RESOLUTIONS_PREFIX:"tolstoy-recreate-resolutions",TOLSTOY_AB_TEST_GROUP:"tolstoy-ab-test-group"},s={accepted:"accepted",rejected:"rejected"}})),s.register("lxjfR",(function(e,o){t(e.exports,"uuidv4",(function(){return a})),t(e.exports,"getFromSessionStorage",(function(){return l})),t(e.exports,"getFromLocalStorage",(function(){return d})),t(e.exports,"getFromCache",(function(){return u})),t(e.exports,"setToSessionStorage",(function(){return p})),t(e.exports,"setLocalStorage",(function(){return E})),t(e.exports,"setToCache",(function(){return g})),t(e.exports,"removeFromSessionStorage",(function(){return h})),t(e.exports,"setCookiePolicy",(function(){return f})),t(e.exports,"removeAllTolstoyKeysFromStorage",(function(){return I}));var n=s("hlJEM"),r=s("fvcet");const{TOLSTOY_COOKIE_POLICY:i}=n.TOLSTOY_CACHE_KEYS;function a(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){const e=Math.trunc(16*Math.random());return("x"===t?e:3&e|8).toString(16)}))}function c(t){try{return t()}catch(t){return window.tolstoyCaptureError?.(t),null}}function l(t){return c((()=>window.sessionStorage.getItem(t)))}function d(t){return c((()=>localStorage.getItem(t)))||l(t)}function u(t){return d(t)||l(t)}function p(t,e,o=!1){c((()=>{if(S()!==n.COOKIE_POLICIES.rejected||o)return window.sessionStorage.setItem(t,e)}))}function E(t,e,o=!1){c((()=>S()!==n.COOKIE_POLICIES.rejected?localStorage.setItem(t,e):o?window.sessionStorage.setItem(t,e):void 0))}function g(t,e,o=!1){c((()=>S()!==n.COOKIE_POLICIES.rejected?localStorage.setItem(t,e):o?window.sessionStorage.setItem(t,e):void 0))}function h(t){return c((()=>window.sessionStorage.removeItem(t)))}const S=()=>u(i),f=t=>{g(i,t,!0)},T=t=>{const e=window.location.host;document.cookie=`${t}=; path=/; domain=.${e}; expires=Thu, 01 Jan 1970 00:00:00 UTC;`,document.cookie=`${t}=; path=/; expires=Thu, 01 Jan 1970 00:00:00 UTC;`},y=t=>[...Object.values(n.TOLSTOY_CACHE_KEYS),...Object.values(r.Keys)].some((e=>t.includes(e)));function I(){const t=document.cookie.split("; ");for(const e of t){const[t]=e.split("=");y(t.trim())&&T(t)}for(const t in localStorage)y(t)&&localStorage.removeItem(t);for(const t in sessionStorage)y(t)&&sessionStorage.removeItem(t)}(()=>{const t=document.cookie.split("; ");for(const e of t){const[t]=e.split("=");y(t.trim())&&T(t)}})()})),s.register("fvcet",(function(e,o){t(e.exports,"Keys",(function(){return n}));const n={IDENTIFY_INFO_ID_KEY:"identifyInfoId",SESSION_COUNTER_KEY:"tolstoySessionCounter",LAST_SEEN_AT_KEY:"tolstoyLastSeenAtKey",FIRST_SEEN_AT_KEY:"tolstoyFirstSeenAtKey",TOLSTOY_VIEWERS_KEY:"tolstoyViewers",TOLSTOY_VIEWED_PRODUCTS:"tolstoyViewedProducts",CURRENT_CUSTOMER_EMAIL_KEY:"tolstoyCurrentCustomer",BUBBLE_TEXT_PREFIX:"bubbleText",NOTIFICATION_BADGE_PREFIX:"notificationBadge",RECREATE_NEW_RESOLUTION_PREFIX:"reCreateNewResolution"}})),s.register("37dzN",(function(e,o){t(e.exports,"FEATURE_PLAYER_VERSION",(function(){return n}));const n="player-version"})),s.register("izL3O",(function(e,o){t(e.exports,"getShop",(function(){return i}));var n=s("kCbDV"),r=s("i1NbZ");function i(){return(0,r.getParameterFromWidgetScripts)(n.WIDGET_SCRIPT_PARAMETERS.shop)}})),s.register("i1NbZ",(function(e,o){t(e.exports,"getParameterFromWidgetScripts",(function(){return c})),t(e.exports,"getEmbedProductId",(function(){return l})),t(e.exports,"getCurrentPageProductId",(function(){return d})),t(e.exports,"getShouldUseCache",(function(){return u})),t(e.exports,"getCacheVersion",(function(){return p}));var n=s("kCbDV"),r=s("2Aomz");const i=(t,e)=>{const o=t.src;return new URL(o).searchParams.get(e)},a=(t,e)=>t.getAttribute(`data-${e}`),c=t=>{const e=document.querySelectorAll(`script[src*="${r.WIDGET_DOMAIN}"]`);for(const o of e){const e=a(o,t)||i(o,t);if(e)return e}},l=t=>{const e=t?.dataset?.productId;return"{{ product.id }}"===e?null:e},d=()=>{const t=c(n.WIDGET_SCRIPT_PARAMETERS.productId);if(t)return t;const{stories:e,carousel:o,embed:s,tile:r}=n.EMBED_WIDGETS_CLASSNAMES,i=document.querySelectorAll(`.${e}, .${o}, .${s}, .${r}`);for(const t of i){const e=l(t);if(e)return e}},u=()=>"true"===c(n.WIDGET_SCRIPT_PARAMETERS.shouldUseCache),p=()=>c(n.WIDGET_SCRIPT_PARAMETERS.cacheVersion)})),s.register("8ZCcc",(function(e,o){t(e.exports,"getFeatureSettings",(function(){return r})),t(e.exports,"getFeatureIsEnabled",(function(){return i})),t(e.exports,"getIsPlayerLazy",(function(){return a})),t(e.exports,"getPlayerOrigin",(function(){return c})),t(e.exports,"getIsFallbackVideoDisabled",(function(){return l}));var n=s("dQiGr");const r=({config:t,featureKey:e})=>t?.featureSettings?.[e],i=({config:t,featureKey:e})=>Boolean(t?.featureSettings?.[e]),a=(t={})=>{const e=r({config:t,featureKey:n.FEATURE_WIDGET_LOADING});return e?.playerLazy},c=(t={})=>{const e=r({config:t,featureKey:n.FEATURE_WIDGET_LOADING});return e?.playerOrigin},l=(t={})=>{const e=r({config:t,featureKey:n.FEATURE_WIDGET_FALLBACK_VIDEO});return e?.dontUseFallback}})),s.register("dQiGr",(function(e,o){t(e.exports,"FEATURE_WIDGET_LOADING",(function(){return n})),t(e.exports,"FEATURE_WIDGET_ONYOU",(function(){return s})),t(e.exports,"FEATURE_WIDGET_ONYOU_ALL_PAGES",(function(){return r})),t(e.exports,"FEATURE_WIDGET_FALLBACK_VIDEO",(function(){return i})),t(e.exports,"FEATURE_CAROUSEL_SHOW_DOTS",(function(){return a})),t(e.exports,"FEATURE_CAROUSEL_VIDEOS",(function(){return c})),t(e.exports,"FEATURE_HIDE_SPOTLIGHT_PLUS_BUTTON",(function(){return l})),t(e.exports,"FEATURE_APP_USE_CREATOR_PROFILE",(function(){return d})),t(e.exports,"FEATURE_BLOCK_SHOPIFY_ADD_TO_CART_ATTRIBUTE",(function(){return u})),t(e.exports,"FEATURE_SHOPIFY_PRICE_FORMATTING",(function(){return p}));const n="widget-loading",s="widget-onyou",r="widget-onyou-enableAllPages",i="widget-video-fallback",a="carousel-show-dots",c="carousel-videos",l="hide-spotlight-plus-button",d="app-use-creator-profile",u="block-shopify-add-to-cart-attribute",p="shopify-price-formatting"})),s.register("lUrCX",(function(e,o){t(e.exports,"getIsTheSameURL",(function(){return i})),t(e.exports,"getUrlCustomParams",(function(){return a})),t(e.exports,"getFilteredSearchParams",(function(){return c})),t(e.exports,"isUrl",(function(){return l})),t(e.exports,"getIsEmailCampaignProject",(function(){return d}));const n=new RegExp("^((([A-Za-z]{3,9}:(?:\\/\\/)?)(?:[\\-;:&=\\+\\$,\\w]+@)?[A-Za-z0-9\\.\\-]+|(?:www\\.|[\\-;:&=\\+\\$,\\w]+@)[A-Za-z0-9\\.\\-]+)((?:\\/[\\+~%\\/\\.\\w\\-_]*)?\\??(?:[\\-\\+=&;%@\\.\\w_]*)#?(?:[\\.\\!\\/\\\\\\w]*))?)","i"),s=t=>!!t&&(Boolean(n.test(t))||t.startsWith("tel:")||t.startsWith("mailto:")||t.startsWith("_self:")),r=t=>{const e=t.replace("www.",""),o=new URL(e);return`${o.origin}${o.pathname}${o.search}`},i=(t,e)=>!(!s(t)||!s(e))&&r(t)===r(e),a=()=>{const t=new URLSearchParams(window.location.search),e=new URLSearchParams;for(const[o,n]of t){const t=o.toLowerCase();o.length<50&&n.length<100&&(t.startsWith("custom_")||t.startsWith("utm_"))&&e.append(o,n)}return e},c=(t={})=>{const e=new URLSearchParams;for(const[o,n]of Object.entries(t))null!=n&&""!==n&&e.append(o,n);return e.toString()},l=t=>n.test(t),d=t=>new URLSearchParams(window.location.search).get("tolstoy")===t})),s.register("dNsZ9",(function(e,o){t(e.exports,"validateUUID",(function(){return n}));const n=t=>t?.match(/^[\da-f]{8}-[\da-f]{4}-[0-5][\da-f]{3}-[089ab][\da-f]{3}-[\da-f]{12}$/i)})),s.register("tZRsn",(function(e,o){t(e.exports,"getIsActiveWidgetEvent",(function(){return r})),t(e.exports,"getIsInactiveWidgetEvent",(function(){return i}));var n=s("8ptJJ");const r=t=>n.ACTIVE_WIDGET_MESSAGES_EVENTS.includes(t),i=t=>n.INACTIVE_WIDGET_MESSAGES_EVENTS.includes(t)})),s.register("kK0IS",(function(e,o){t(e.exports,"getAccountSettings",(function(){return u})),t(e.exports,"postUserIdentification",(function(){return p})),t(e.exports,"getProjectConfig",(function(){return E})),t(e.exports,"getConfigByUrl",(function(){return g})),t(e.exports,"getConfigByProductId",(function(){return h})),t(e.exports,"getCollectionTileConfig",(function(){return S})),t(e.exports,"getBubbleSettings",(function(){return f})),t(e.exports,"getCollectionPageTileConfig",(function(){return T})),t(e.exports,"sendEvent",(function(){return y})),t(e.exports,"createPlayerEvent",(function(){return I})),t(e.exports,"createResolutions",(function(){return m})),t(e.exports,"createSiteActivityEvent",(function(){return N})),t(e.exports,"createPageVisitEvent",(function(){return w}));var n=s("lUrCX"),r=s("2Aomz"),i=s("i1NbZ"),a=s("izL3O"),c=s("6QfcD"),l=s("gxrY5");const d=()=>window.tolstoySettings?.shouldUseCache||window.tolstoySettings?.cacheVersion?r.API_LB_CDN_BASE_URL:r.API_LB_BASE_URL,u=async()=>{const t=(0,c.getAppKey)(),e=window.Shopify?.shop||(0,a.getShop)(),o=(0,i.getShouldUseCache)(),n=(0,i.getCacheVersion)(),s=o||n?r.API_LB_CDN_BASE_URL:r.API_LB_BASE_URL;try{const o=new URL(`${s}/actions/accounts/${t}`);n&&o.searchParams.set("v",n),e&&o.searchParams.set("appUrl",e);return(await fetch(o.toString())).json()}catch(t){window.tolstoyCaptureError?.(t,"Error loading account settings:")}},p=async t=>{try{return(await fetch(`${r.API_BASE_URL}/identify/identify`,{method:"POST",body:JSON.stringify({data:t})})).json()}catch(t){window.tolstoyCaptureError?.(t,"Error updating identification:")}},E=async(t,e)=>{const o=(0,i.getCurrentPageProductId)(),s=d(),r=(0,i.getCacheVersion)(),a=(0,n.getFilteredSearchParams)({widgetType:e,productId:o,publishId:t,v:r});try{return(await fetch(`${s}/settings/widget/by-publish-id?${a}`)).json()}catch(t){window.tolstoyCaptureError?.(t,"Error loading config:")}},g=async t=>{const e=d(),o=(0,i.getCacheVersion)(),s=(0,n.getFilteredSearchParams)({...t,url:`${window.location.origin}${window.location.pathname}`,v:o});try{return(await fetch(`${e}/settings/widget/by-product-url?${s}`)).json()}catch(t){window.tolstoyCaptureError?.(t,"Error getting product page config:")}},h=async t=>{const e=d(),o=(0,i.getCacheVersion)(),s=(0,n.getFilteredSearchParams)({...t,v:o});try{return(await fetch(`${e}/settings/widget/by-product-id?${s}`)).json()}catch(t){window.tolstoyCaptureError?.(t,"Error getting product page config:")}},S=async(t,e,o)=>{const s=d(),r=(0,i.getCacheVersion)(),a=(0,n.getFilteredSearchParams)({publishId:t,externalProductIds:e,collectionId:o,v:r});try{return(await fetch(`${s}/settings/widget/get-collection-tile-config?${a}`)).json()}catch(t){window.tolstoyCaptureError?.(t,"Error getting collection tile config:")}},f=async t=>{const e=new URLSearchParams(t);try{return(await fetch(`${r.API_LB_BASE_URL}/settings/bubble?${e.toString()}`)).json()}catch(t){window.tolstoyCaptureError?.(t,"Error getting bubble settings:")}},T=async(t,e)=>{const o=d(),s=(0,i.getCacheVersion)(),r=(0,n.getFilteredSearchParams)({publishId:t,collectionId:e,v:s});try{return(await fetch(`${o}/settings/collection-page-tile-config?${r}`)).json()}catch(t){window.tolstoyCaptureError?.(t,"Error getting collection page tile config:")}},y=async t=>{if(void 0!==window.location.origin)try{return await fetch(`${r.API_BASE_URL}/events/event`,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(t)})}catch(t){window.tolstoyCaptureError?.(t,"Error sending page view:")}},I=(0,l.sendWithInitialDelay)(y),m=async t=>{try{return await fetch(`${r.CREATE_VIDEO_RESOLUTIONS}?publishId=${t}`)}catch(t){window.tolstoyCaptureError?.(t)}},N=(0,l.sendWithInitialDelay)((t=>{try{window.navigator.sendBeacon(r.SITE_ACTIVITY_EVENT_URL,JSON.stringify(t))}catch(t){const e="Error occurred in createSiteActivityEvent";console.error(e,t),window.tolstoyCaptureError?.(t,e)}})),w=(0,l.sendWithInitialDelay)((t=>{try{window.navigator.sendBeacon(r.PAGE_VISIT_EVENT_URL,JSON.stringify(t))}catch(t){const e="Error occurred in createPageVisitEvent";console.error(e,t),window.tolstoyCaptureError?.(t,e)}}))})),s.register("6QfcD",(function(e,o){t(e.exports,"getAppKey",(function(){return a}));var n=s("kCbDV"),r=s("i1NbZ");let i="";function a(){return window.tolstoyAppKey||i?window.tolstoyAppKey||i:(i=(0,r.getParameterFromWidgetScripts)(n.WIDGET_SCRIPT_PARAMETERS.appKey),i)}})),s.register("gxrY5",(function(e,o){t(e.exports,"sendWithInitialDelay",(function(){return r}));let n=!1;const s=[];setTimeout((()=>{n=!0,(()=>{for(;s.length>0;){const{eventFunction:t,args:e}=s.shift();t(...e)}})()}),4e3);const r=t=>(...e)=>{if(n)return t(...e);s.push({eventFunction:t,args:e})}})),s.register("xb7kn",(function(e,o){t(e.exports,"tolstoyWidgetReady",(function(){return r})),t(e.exports,"tolstoyPlayerReady",(function(){return i}));var n=s("8ptJJ");const r=()=>{const t=new CustomEvent("tolstoyWidgetReady");window.dispatchEvent(t)},i=()=>{const t=new CustomEvent(n.TOLSTOY_PLAYER_READY_MESSAGE);window.dispatchEvent(t)}})),s.register("ljwIw",(function(e,o){t(e.exports,"createElement",(function(){return n})),t(e.exports,"createScript",(function(){return s})),t(e.exports,"createIframe",(function(){return r})),t(e.exports,"registerDomUpdatesListener",(function(){return a})),t(e.exports,"safePlayVideo",(function(){return c})),t(e.exports,"stringToHTML",(function(){return l})),t(e.exports,"getPublicId",(function(){return d})),t(e.exports,"getElementSelector",(function(){return u})),t(e.exports,"getElement",(function(){return p})),t(e.exports,"getCustomElementSelector",(function(){return E})),t(e.exports,"getCustomElement",(function(){return g}));const n=({tagName:t,src:e,container:o,attributes:n,style:s,styleString:r,classNames:i,eventListeners:a})=>{const c=document.createElement(t);if(a)for(const[t,e]of Object.entries(a))c.addEventListener(t,e);if(e&&(c.src=e),n)for(const[t,e]of Object.entries(n))c.setAttribute(t,e);if(r&&(c.style.cssText=r),s)for(const[t,e]of Object.entries(s))c.style[t]=e;return i&&c.classList.add(...i),o&&o.append(c),c},s=({src:t,container:e,attributes:o})=>n({tagName:"script",src:t,container:e,attributes:o}),r=({src:t,container:e,attributes:o,style:s})=>n({tagName:"iframe",src:t,container:e,attributes:o,style:s}),i=({callback:t,classNames:e})=>{const o=t=>e.includes(t),n=t=>!!t.classList&&((t=>[...t.classList].some(o))(t)||(t=>e.some((e=>t.getElementsByClassName(e).length>0)))(t)),s=t=>{if("childList"!==t.type||0===t.addedNodes.length)return!1;return[...t.addedNodes].some(n)};new window.MutationObserver((e=>{e.some(s)&&t()})).observe(document.body,{subtree:!0,childList:!0})},a=({callback:t,classNames:e})=>{(({callback:t})=>{window.addEventListener("DOMContentLoaded",t),window.addEventListener("load",t)})({callback:t}),"MutationObserver"in window&&i({callback:t,classNames:e})},c=({video:t,onError:e})=>t?.play().catch(e),l=t=>{const e=document.createElement("div");return e.innerHTML=t.trim(),e.firstChild},d=(t,e)=>`${t}-${e}`,u=(t,e)=>`[data-tolstoy-element="${d(t,e)}"]`,p=(t,e)=>window.document.querySelector(u(t,e)),E=(t,e)=>`[${t}="${e}"]`,g=(t,e)=>window.document.querySelector(`[${t}="${e}"]`)})),s.register("2S3LN",(function(e,o){t(e.exports,"getPublicId",(function(){return f})),t(e.exports,"getEmbedPublishId",(function(){return T})),t(e.exports,"getEmbedCollectionId",(function(){return y})),t(e.exports,"reloadFontIfNeeded",(function(){return I})),t(e.exports,"getVideoBaseUrl",(function(){return m})),t(e.exports,"getAllElements",(function(){return N})),t(e.exports,"stopAllVideos",(function(){return w})),t(e.exports,"stopDynamicVideos",(function(){return _})),t(e.exports,"onViewPortChangeHandler",(function(){return A})),t(e.exports,"getConfig",(function(){return b})),t(e.exports,"shouldForceMute",(function(){return v})),t(e.exports,"getMessageFromError",(function(){return C})),t(e.exports,"getIsElementVisible",(function(){return R})),t(e.exports,"getPageVariantId",(function(){return L}));var n=s("ljwIw"),r=s("68VIL"),i=s("519R9"),a=s("aEodP"),c=s("dQiGr"),l=s("6QfcD"),d=s("jvykV"),u=s("kK0IS"),p=s("kCbDV"),E=s("1A9Dw"),g=s("8ZCcc"),h=s("6MJM3"),S=s("iG8TK");const f=(t,e,o)=>o?`${t}-${e}-${o}`:`${t}-${e}`,T=t=>t.dataset.publishId?t.dataset.publishId:t.id?t.id.split("_")[0]:"",y=t=>t?.dataset?.collectionId,I=t=>{const e=t?.design?.branding?.typography?.font,o=t?.design?.branding?.typography?.fontHeading;(e?.family||o?.family)&&(e?.family&&(0,d.reloadFont)(e),o?.family&&(0,d.reloadFont)(o,"tolstoy-custom-heading-font-family"))},m=({step:t,embedMotion:e,isStory:o,loadAll:n=!1,isCarouselPlayInTileFirst:s})=>{if(e===S.EMBED_CAROUSEL_MOTION.static||s)return null;const r=window.innerWidth<=450,i=e===S.EMBED_CAROUSEL_MOTION.hoverOver,a=e===S.EMBED_CAROUSEL_MOTION.dynamic;return a&&n?(0,h.getBaseUrl)({step:t,isStory:o}):i&&r||a?null:(0,h.getBaseUrl)({step:t,isStory:o})},N=(t,e)=>window.document.querySelectorAll(`[data-tolstoy-element="${f(t,e)}"]`),w=({videoClass:t,publishId:e,removeEventListenerFunction:o})=>{const n=N(t,e);for(const t of n)t.pause(),o?.(t)},_=({videoClass:t,publishId:e,setIsDynamicVideoRunning:o,onVideoEnd:n})=>{o(!1),w({videoClass:t,publishId:e,removeEventListenerFunction:t=>{t.removeEventListener("ended",n)}})},A=({videoClass:t,isDynamicVideoRunning:e,setIsDynamicVideoRunning:o,dynamicVideoHandler:n,publishId:s,onVideoEnd:r})=>{const i=N(t,s);if(0===i.length)return;const a=(t=>{const e=t.getBoundingClientRect();return e.top>=-e.height&&e.left>=0&&e.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&e.right<=(window.innerWidth||document.documentElement.clientWidth)})(i[0]);!a&&e?(_({videoClass:t,publishId:s,setIsDynamicVideoRunning:o,onVideoEnd:r}),o(!1)):a&&!e&&(n(),o(!0))},b=async({publishId:t,productId:e,widgetType:o,tags:n,appUrl:s,variantId:r})=>{const d=e&&e!==p.PLACEHOLDER_PRODUCT_ID?u.getConfigByProductId:u.getConfigByUrl,h=window.tolstoyAppKey||(0,l.getAppKey)()||"",S=new URLSearchParams(window.location.search),f=r||S.get("variant"),T=await d({productId:e,defaultPublishId:t,widgetType:o,appKey:h,tags:n,appUrl:s,variantId:f});return(new(0,E.default)(o).init(T)||{}).hideElement?{disabled:!0}:(T?.disabled||((0,g.getFeatureIsEnabled)({config:T,featureKey:c.FEATURE_BLOCK_SHOPIFY_ADD_TO_CART_ATTRIBUTE})&&i.default.postMessage({eventName:a.INTERNAL_EVENTS.blockAnonymousIdToCart,appKey:h}),T?.openCommerceSettings&&i.default.postMessage({eventName:a.INTERNAL_EVENTS.openCommerceSettingsUpdate,openCommerceSettings:T.openCommerceSettings})),T)};function v(t,e){return Boolean(null==e?t:!e)}const C=t=>{const e=t=>{const e=(0,n.stringToHTML)(t);return e.style.verticalAlign="middle",e.style.margin="0 5px",e.style.marginBottom="3px",e},o=document.createElement("p"),s=e((0,r.getWarningIcon)()),i=e((0,r.getPublishIcon)());o.append(s);return({"Invalid publishId":["Add the publish ID from the",i,"tab of your project in Tolstoy"],"Project is not live":["Your project is in draft. Publish project in the",i," tab of your project in Tolstoy"],"Project is deleted":["Project has been deleted"],"No videos found":["Select videos in the Videos tab of your project in Tolstoy"],"No filtered videos found":["Select videos in the Videos tab of your project in Tolstoy"],"No connections found":["Select videos in the Videos tab of your project in Tolstoy"],"No videos found for product":["Add tagged videos for this product in the Videos tab of your project in Tolstoy"]}[t]||["Couldn't find product page"]).forEach((t=>{"string"==typeof t?o.append(document.createTextNode(t)):o.append(t)})),o},R=({element:t})=>{const e=t.getBoundingClientRect();return 0!==e.width&&0!==e.height&&(e.top>=0&&e.left>=0&&e.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&e.right<=(window.innerWidth||document.documentElement.clientWidth))},L=()=>new URLSearchParams(window.location.search).get("variant")})),s.register("68VIL",(function(e,o){t(e.exports,"xButtonsSvg",(function(){return n})),t(e.exports,"getFeedXButtonSvg",(function(){return s})),t(e.exports,"getPlayButtonSvg",(function(){return r})),t(e.exports,"leftArrowSvg",(function(){return i})),t(e.exports,"rightStraightArrowSvg",(function(){return a})),t(e.exports,"rightChevron",(function(){return c})),t(e.exports,"getPauseSvg",(function(){return l})),t(e.exports,"getMutedSvg",(function(){return d})),t(e.exports,"getUnmutedSvg",(function(){return u})),t(e.exports,"getWarningIcon",(function(){return p})),t(e.exports,"getPublishIcon",(function(){return E}));const n='<svg style="margin-left: 0.5px; width: 11px !important; height: 10px !important;" width="11" height="10" viewBox="0 0 14 13" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path d="M13.0547 12.5938C12.8203 12.8281 12.3906 12.8281 12.1562 12.5938L7 7.39844L1.80469 12.5938C1.57031 12.8281 1.14062 12.8281 0.90625 12.5938C0.671875 12.3594 0.671875 11.9297 0.90625 11.6953L6.10156 6.5L0.90625 1.34375C0.671875 1.10938 0.671875 0.679688 0.90625 0.445312C1.14062 0.210938 1.57031 0.210938 1.80469 0.445312L7 5.64062L12.1562 0.445312C12.3906 0.210938 12.8203 0.210938 13.0547 0.445312C13.2891 0.679688 13.2891 1.10938 13.0547 1.34375L7.85938 6.5L13.0547 11.6953C13.2891 11.9297 13.2891 12.3594 13.0547 12.5938Z" fill="white"/>\n</svg>\n',s=(t="#FFFFFF")=>`<svg width="18" height="18" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M16.055 16.594a.662.662 0 0 1-.899 0L10 11.398l-5.195 5.196a.662.662 0 0 1-.899 0 .662.662 0 0 1 0-.899L9.102 10.5 3.906 5.344a.662.662 0 0 1 0-.899.662.662 0 0 1 .899 0L10 9.641l5.156-5.196a.662.662 0 0 1 .899 0 .662.662 0 0 1 0 .899L10.859 10.5l5.196 5.195a.662.662 0 0 1 0 .899Z" style="fill: ${t} !important;"\n   /></svg>`,r=(t="#fff",e="")=>`<svg class="${e}" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"><path d="M4 3.532c0-1.554 1.696-2.514 3.029-1.715l14.113 8.468c1.294.777 1.294 2.653 0 3.43L7.029 22.183c-1.333.8-3.029-.16-3.029-1.715V3.532Z" fill="${t}"/></svg>`,i='<svg width="10" height="18" viewBox="0 0 10 18" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M7.797 16.664.648 9.204A1.071 1.071 0 0 1 .375 8.5c0-.195.078-.43.234-.625L7.758.415a.932.932 0 0 1 1.328-.04c.39.352.39.938.039 1.328L2.602 8.5l6.562 6.875a.932.932 0 0 1-.039 1.328.932.932 0 0 1-1.328-.039Z" fill="#090A0B"/></svg>',a='<svg width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M10.804 6.563 6.902 2.661l.619-.619L12.478 7l-4.983 4.983-.619-.619 3.927-3.926H1.96v-.875z" fill="#fff" stroke="#fff"/></svg>',c='<svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="20 16 10 12" fill="none">\n  <path d="M22.1274 28L28.1274 22L22.1274 16" stroke="#5C5C5C" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>\n</svg>',l=(t="#fff",e="")=>`\n<svg class="${e}" width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg">\n  <g clipPath="url(#pauseIcon)">\n    <path\n      d="M4.375 2.5c-.633 0-1.125.516-1.125 1.125v6.75A1.11 1.11 0 0 0 4.375 11.5h.75c.61 0 1.125-.492 1.125-1.125v-6.75A1.14 1.14 0 0 0 5.125 2.5h-.75Zm4.5 0c-.633 0-1.125.516-1.125 1.125v6.75A1.11 1.11 0 0 0 8.875 11.5h.75c.61 0 1.125-.492 1.125-1.125v-6.75A1.14 1.14 0 0 0 9.625 2.5h-.75Z"\n      fill="#fff"\n    />\n  </g>\n  <defs>\n    <clipPath id="pauseIcon">\n      <path fill="${t}" d="M3 2.5h8v9H3z" />\n    </clipPath>\n  </defs>\n</svg>\n`,d=({color:t="#fff",className:e=""}={})=>`<svg class="${e}" width="12" height="12" viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg" aria-label="Mute tolstoy video"><path d="M6.266 1.551a0.667 0.667 0 0 1 0.382 0.583v7.714c0 0.261 -0.161 0.482 -0.381 0.602a0.651 0.651 0 0 1 -0.703 -0.12L2.85 7.918h-1.346a1.269 1.269 0 0 1 -1.286 -1.286v-1.286c0 -0.703 0.562 -1.286 1.286 -1.286h1.346L5.563 1.671a0.651 0.651 0 0 1 0.703 -0.12Zm2.492 2.651 1.105 1.106 1.105 -1.106c0.18 -0.18 0.483 -0.18 0.663 0 0.201 0.201 0.201 0.502 0 0.683L10.526 5.991l1.106 1.104c0.201 0.201 0.201 0.502 0 0.683a0.44 0.44 0 0 1 -0.663 0l-1.106 -1.105 -1.104 1.106c-0.201 0.201 -0.502 0.201 -0.683 0 -0.201 -0.182 -0.201 -0.483 0 -0.684l1.105 -1.105L8.073 4.886c-0.2 -0.18 -0.2 -0.482 0 -0.683 0.182 -0.18 0.483 -0.18 0.684 0Z" fill="${t}"/></svg>`,u=({color:t="#fff",className:e=""}={})=>`<svg class="${e}" width="12" height="12" viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg" aria-label="Unmute tolstoy video"><path d="M6.627 1.55c.238.101.411.342.411.583v7.714c0 .261-.173.482-.411.603a.742.742 0 0 1-.757-.121l-2.921-2.41H1.5c-.779 0-1.385-.563-1.385-1.286V5.347c0-.703.606-1.286 1.385-1.286h1.449l2.921-2.39a.742.742 0 0 1 .757-.121Zm3.721 1.447c.931.723 1.537 1.788 1.537 2.993 0 1.225-.606 2.29-1.537 2.993a.542.542 0 0 1-.735-.06c-.195-.201-.152-.502.065-.683.714-.522 1.168-1.326 1.168-2.25 0-.904-.454-1.708-1.168-2.23a.475.475 0 0 1-.065-.683.565.565 0 0 1 .735-.08ZM9.029 4.503c.476.362.779.884.779 1.487 0 .623-.303 1.145-.779 1.507a.55.55 0 0 1-.736-.081.454.454 0 0 1 .087-.663.966.966 0 0 0 .389-.763.928.928 0 0 0-.389-.743.475.475 0 0 1-.087-.683.57.57 0 0 1 .736-.061Z" fill="${t}"/></svg>`,p=()=>'\n<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#ff0000" stroke-width="2.4" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-circle-alert"><circle cx="12" cy="12" r="10"/><line x1="12" x2="12" y1="8" y2="12"/><line x1="12" x2="12.01" y1="16" y2="16"/></svg>\n',E=()=>'\n<svg width="40" height="20" xmlns="http://www.w3.org/2000/svg">\n    <rect width="40" height="20" rx="3" ry="3" style="fill:blue;"/>\n    <text x="50%" y="50%" dominant-baseline="middle" text-anchor="middle" font-size="8" font-weight="normal" fill="white" letter-spacing="0.1px">\n        Publish\n    </text>\n</svg>\n'})),s.register("519R9",(function(e,o){t(e.exports,"default",(function(){return c}));var n=s("dEa8z"),r=s("93NPo");class i extends n.default{constructor(){if(i.instance)return i.instance;super({shouldArchivePastEvents:!0}),i.instance=this}eventHandler=t=>{const{data:e={}}=t,{eventName:o}=e;if(this.eventCallbacks[o])for(const e of this.eventCallbacks[o])e(t)};postMessage=t=>{const e=t.transmissionId||(0,r.generateUUID)();return super.postMessage({...t,transmissionId:e}),e};init=()=>{this.initListener(this.eventHandler)}}const a=new i;Object.freeze(a);var c=a})),s.register("dEa8z",(function(e,o){t(e.exports,"default",(function(){return r}));var n=s("lqvQ6");var r=class{constructor({shouldIncludeLogs:t=!1,shouldArchivePastEvents:e=!1}={}){this.broadcastHub=new(0,n.default),this.eventCallbacks={},this.pastEvents={},this.shouldIncludeLogs=t,this.shouldArchivePastEvents=e}logMessage(t){this.shouldIncludeLogs&&console.log(t)}throwError(t){if(this.shouldIncludeLogs)throw new Error(t)}archivePastEvent(t){if(!this.shouldArchivePastEvents)return;const{eventName:e}=t;this.pastEvents[e]||(this.pastEvents[e]=[]),this.pastEvents[e].push(t)}postMessage(t){this.archivePastEvent(t),this.broadcastHub.postMessage(t)}postPastEvents({eventName:t,callback:e}){if(this.pastEvents[t])for(const o of this.pastEvents[t])e({data:{...o,isPastEvent:!0}})}subscribe({eventName:t,callback:e,shouldIncludePastEvents:o}){this.eventCallbacks[t]||(this.eventCallbacks[t]=new Set),this.eventCallbacks[t].has(e)?this.throwError(`Already subscribed to event ${t} with this callback`):(this.eventCallbacks[t].add(e),o&&this.postPastEvents({eventName:t,callback:e}))}subscribeMultipleEvents=({eventNames:t,callback:e,shouldIncludePastEvents:o})=>{for(const n of t)this.subscribe({eventName:n,callback:e,shouldIncludePastEvents:o})};unsubscribe({eventName:t,callback:e}){if(!this.eventCallbacks[t])return void this.throwError(`Not subscribed to event ${t}`);if(!this.eventCallbacks[t].has(e))return void this.throwError("Callback is not subscribed");this.eventCallbacks[t].delete(e)?this.logMessage(`Unsubscribed from event ${t}`):this.logMessage(`Not subscribed to event ${t} with this callback`)}unsubscribeMultipleEvents=({eventNames:t,callback:e})=>{for(const o of t)this.unsubscribe({eventName:o,callback:e})};initListener(t){this.broadcastHub.addEventListener("message",t)}}})),s.register("lqvQ6",(function(e,o){t(e.exports,"default",(function(){return r}));var n=s("93NPo");var r=class{constructor(t){this.name=t||(0,n.generateUUID)();try{"BroadcastChannel"in self&&(this.broadcaster=new BroadcastChannel(this.name),this.receiver=new BroadcastChannel(this.name))}catch(t){console.error("self is not defined",t)}}postMessage=t=>{this.broadcaster?.postMessage(t)};addEventListener=(...t)=>{this.receiver?.addEventListener(...t)}}})),s.register("aEodP",(function(e,o){t(e.exports,"INTERNAL_EVENTS",(function(){return n}));const n={modalOpen:"tolstoyModalOpen",playerReady:"tolstoyPlayerReady",toggleFeedCloseButton:"toggleFeedCloseButton",showFeedProductModal:"showFeedProductModal",reportModalOpen:"tolstoyReportModalOpen",reportModalClose:"tolstoyReportModalClose",modalMessagingReady:"tolstoyModalMessagingReady",closePlayer:"tolstoyClosePlayer",userEmailUpdate:"tolstoyUserEmailUpdate",isRebuyAppInstalled:"tolstoyIsRebuyAppInstalled",openRebuyCart:"tolstoyOpenRebuyCart",rebuyCartShown:"rebuyCartShown",rebuyCartHidden:"rebuyCartHidden",openKendoModal:"tolstoyOpenKendoModal",changeZIndex:"tolstoyChangeZIndex",isAfterpayAppInstalled:"tolstoyIsAfterpayAppInstalled",getProductsMetafields:"getProductsMetafields",returnProductsMetafields:"returnProductsMetafields",productCardClick:"tolstoyProductCardClick",spotlightCarouselQuickShopClick:"tolstoySpotlightCarouselQuickShopClick",externalEventSubscribed:"tolstoyExternalEventSubscribed",productCardClickSubscribed:"tolstoyProductCardClickSubscribed",isTapcart:"tolstoyIsTapcart",openTapcartProduct:"tolstoyOpenTapcartProduct",setAnonymousIdToCart:"tolstoySetAnonymousIdToCart",blockAnonymousIdToCart:"tolstoyBlockAnonymousIdToCart",addToCart:"tolstoyAddToCart",addToCartSuccess:"tolstoyAddToCartSuccess",addToCartError:"tolstoyAddToCartError",addToCartSoldOut:"tolstoyAddToCartSoldOut",addToCartDisableDefault:"tolstoyAddToCartDisableDefault",cartItemQuantityChange:"tolstoyCartItemQuantityChange",cartItemQuantityChangeSuccess:"tolstoyCartItemQuantityChangeSuccess",cartItemQuantityChangeError:"tolstoyCartItemQuantityChangeError",cartDataRequest:"tolstoyCartDataRequest",cartDataResponse:"tolstoyCartDataResponse",loginWithMultipassUrlRequest:"tolstoyLoginWithMultipassUrl",loginWithMultipassUrlResponse:"tolstoyLoginWithMultipassUrlResponseMessage",productRecommendationsRequest:"tolstoyProductRecommendationsRequest",productRecommendationsResponse:"tolstoyProductRecommendationsResponse",requestProductsUpdate:"tolstoyRequestProductsUpdate",productUpdateResponse:"tolstoyProductUpdateResponse",moveToUrl:"tolstoyMoveToUrl",isNonBaseCurrency:"tolstoyIsNonBaseCurrency",urlChange:"urlChange",urlLocaleUpdate:"tolstoyUrlLocaleUpdate",openCommerceSettingsUpdate:"tolstoyOpenCommerceSettingsUpdate",rejectCookiePolicy:"rejectCookiePolicy"}})),s.register("jvykV",(function(e,o){t(e.exports,"reloadFont",(function(){return a}));var n=s("e857j");const r=[];const i=(t,e=1)=>{t&&3!==e&&(document.querySelector("#tolstoyWidgetElement")?document.querySelector("#tolstoyWidgetElement").style.fontFamily=`${t}, ${n.FALLBACK_FONTS}`:setTimeout((()=>{i(t,e+1)}),1e3))};function a(t,e="tolstoy-custom-font-family"){if(!t||r.includes(e))return;const{sources:o}=t;!function(t,e){const o="italic",n="normal",s={".ttf":"truetype",".otf":"opentype",".woff":"woff",".woff2":"woff2"},r=document.createElement("style");for(const i of Object.keys(t)){const a=t[i],c=i.includes(o),l=i.split("-")[1]||i.replace(o,"")||n,d=c?o:n,u=s[Object.keys(s).find((t=>a.includes(t)))],p=a.replace("http://","https://");r.append(document.createTextNode(`@font-face { font-family: '${e}'; src: url("${p}") format("${[u]}"); font-weight: ${l}; font-style: ${d};}`))}document.head.append(r)}(o,e),i(e),r.push(e)}})),s.register("e857j",(function(e,o){t(e.exports,"FALLBACK_FONTS",(function(){return n})),t(e.exports,"TOLSTOY_CUSTOM_FONT_FAMILY",(function(){return s})),t(e.exports,"TOLSTOY_CUSTOM_HEADING_FONT_FAMILY",(function(){return r}));const n="Nunito Sans, sans-serif",s="tolstoy-custom-font-family",r="tolstoy-custom-heading-font-family"})),s.register("1A9Dw",(function(e,o){t(e.exports,"default",(function(){return l}));var n=s("9bB3T"),r=s("bvKjB"),i=s("eSOI5");const a="A",c="B";var l=class{constructor(t){this.widgetType=t}sendAbTestInitializedEvent({abTestId:t,group:e,excludeExternalAnalytics:o,probability:n}){const s={abTestId:t,eventName:r.EVENT_NAMES.abTestInitialized,sessionUniqueId:(0,i.getSessionUniqueId)(),testGroup:e,probability:n};this.analytics.sendEventImmediately(s,o)}initializeGroup({abTestId:t,probability:e,excludeExternalAnalytics:o}){const n=(0,i.getAbTestGroup)(t);if(n)return void(this.group=n);const s=Math.random()>e?c:a;this.group=s,this.sendAbTestInitializedEvent({abTestId:t,group:s,excludeExternalAnalytics:o,probability:e}),(0,i.setAbTestGroup)(t,s)}init(t){if(!t)return;const{abTestSettings:e={}}=t,{isEnabled:o,abTestId:s,probability:r,groupASettings:i={},groupBSettings:c={},excludeExternalAnalytics:l}=e;return o?(this.analytics=new(0,n.default)({config:t,playerType:this.widgetType}),this.initializeGroup({abTestId:s,probability:r,excludeExternalAnalytics:l}),this.group===a?i:c):void 0}}})),s.register("9bB3T",(function(e,o){t(e.exports,"default",(function(){return p}));var n=s("bvKjB"),r=s("aQK74"),i=s("igWUq"),a=s("50h3S"),c=s("i1NbZ"),l=s("eSOI5"),d=s("kK0IS"),u=s("lxjfR");var p=class{constructor({config:t,playerType:e,collectionId:o}){this.config=t,this.publishId=t.publishId,this.playerType=e,this.sessionId=(0,l.getSessionId)()||(0,u.uuidv4)(),this.anonymousId=(0,l.getAndSetAnonymousId)(),this.currentPageProductId=(0,c.getCurrentPageProductId)(),this.collectionId=o,this.errors={}}getIsMobile(){return window.screen.width<=450||window.screen.height<=450}getAnalyticsParams(t={}){const{id:e,appKey:o,name:n,googleAnalyticsID:s}=this.config,r=window.location.href.split("?")[0],i=window.Shopify?.shop,a=this.errors;return{appKey:o,publishId:this.publishId,sessionId:this.sessionId,anonymousId:this.anonymousId,currentPageProductId:this.currentPageProductId,isMobile:this.getIsMobile(),pageUrl:r,storeUrl:i,appUrl:i,googleAnalyticsID:s,projectId:e,playlist:n,timestamp:(new Date).toISOString(),parentUrl:window.location.href,playerType:this.playerType,customParams:a?JSON.stringify(a):void 0,collectionId:this.collectionId,...t}}sendEventToAllSources(t){(0,d.createPlayerEvent)(t),(0,r.sendAnalyticsToExternalSource)({data:{...t,name:t.eventName}})}sendEventImmediately(t={},e=!1){const o=this.getAnalyticsParams(t);(0,d.sendEvent)(o),e||(0,r.sendAnalyticsToExternalSource)({data:{...o,name:o.eventName}})}sendEvent(t={},e=!1){const o=this.getAnalyticsParams(t);(0,d.createPlayerEvent)(o),e||(0,r.sendAnalyticsToExternalSource)({data:{...o,name:o.eventName}})}handlePageView(){(0,r.setImpressionByPublishId)(this.publishId,!1),this.sendEvent({eventName:n.EVENT_NAMES.pageView})}handleEmbedView(){(0,r.setImpressionByPublishId)(this.publishId,!0),this.sendEvent({eventName:n.EVENT_NAMES.embedView})}handleOnYouClick(){(0,r.setImpressionByPublishId)(this.publishId,!0),(0,l.setSessionId)(this.sessionId),this.sendEvent({eventName:n.EVENT_NAMES.onYouClick})}handleSessionStart(){const t=this.getAnalyticsParams({eventName:n.EVENT_NAMES.sessionStart});this.sendEventToAllSources(t),(0,i.handleTolstoyStart)({data:{...t,name:a.PLAYER_EVENT_NAMES.sessionStart}}),window.postMessage({...t,name:a.PLAYER_EVENT_NAMES.sessionStart},"*")}handleVideoLoaded(t={}){const e=this.getAnalyticsParams({...t,eventName:n.EVENT_NAMES.videoLoaded});this.sendEventToAllSources(e)}handleVideoWatched(t={}){const e=this.getAnalyticsParams({...t,eventName:n.EVENT_NAMES.videoWatched});this.sendEventToAllSources(e)}}})),s.register("igWUq",(function(e,o){t(e.exports,"handleTolstoyStart",(function(){return E})),t(e.exports,"handleWatchedProductIds",(function(){return h})),t(e.exports,"handleOpenIntegration",(function(){return S})),t(e.exports,"handleHideIntegration",(function(){return f}));var n=s("50h3S"),r=(s("bvKjB"),s("8ptJJ")),i=s("519R9"),a=s("aEodP"),c=s("93NPo"),l=s("eSOI5");let d,u="";const p=t=>{const e=document.querySelector("#smile-ui-container");t&&(u=e?.style.display||""),e?.style?.setProperty("display",t||u)},E=t=>{if(t.data.name===n.PLAYER_EVENT_NAMES.sessionStart||t.data.name===n.PLAYER_EVENTS.autoplayStart){const e=(t=>{let e=0;return o=>{try{o()}catch(n){try{fetch("https://api.gotolstoy.com/events/event",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({eventName:"widgetError",text:n.message,timestamp:(new Date).toISOString(),parentUrl:window.location.href,appKey:t.data.appKey,publishId:t.data.publishId,sessionId:t.data.sessionId,source:t.data.name,answerKey:`${e}`,currentPageProductId:o.toString(),formData:`${(n&&n.stack||"").slice(0,1999)}`})})}catch(t){(0,c.logDevelopmentError)(t)}}finally{e++}}})(t);e((()=>(0,l.setPublishId)(t.data.publishId))),e((()=>(0,l.setTolstoyInteractionDate)(t.data.appKey))),e((()=>(0,l.setSessionId)(t.data.sessionId))),e((()=>(0,l.updateTolstoyActivitySessionIdByPublishId)(t.data.publishId,t.data.sessionId))),e((()=>p("none"))),e((()=>g(t.data.anonymousId)))}},g=t=>{window.Shopify&&i.default.postMessage({eventName:a.INTERNAL_EVENTS.setAnonymousIdToCart,anonymousId:t})},h=({data:{name:t,publishId:e,productIds:o}={}})=>{if(t===r.TOLSTOY_WATCHED_PRODUCT_IDS_MESSAGE)for(const t of o)(0,l.pushTolstoyViewedProducts)({productId:t,publishId:e})},S=t=>{L[t.data.name]&&L[t.data.name](t.data)},f=t=>{O[t.data.name]&&setTimeout((()=>O[t.data.name]()),500)};const T=t=>{document.head.insertAdjacentHTML("beforeend",`<style>${t} { visibility: hidden; display: none; }</style>`)},y="tolstoyHideFreshChat",I="tolstoyOpenFreshChat",m="tolstoyHideReamaze",N="tolstoyOpenReamaze",w="tolstoyHideAda",_="tolstoyOpenAda",A="tolstoyHideTidio",b="tolstoyOpenTidio",v="tolstoyHideCertainly",C="tolstoyOpenCertainly",R="tolstoyHideVfChat",L={[n.PLAYER_EVENT_NAMES.openGorgias]:()=>{window.GorgiasChat&&(window.GorgiasChat.open?.(),window.tolstoyWidget.hide(),document.head.insertAdjacentHTML("beforeend","<style>#gorgias-chat-container iframe#chat-button { visibility: visible !important; display: block !important; }</style>"))},[n.PLAYER_EVENT_NAMES.openIntercom]:()=>{const t=setTimeout((()=>clearInterval(e)),9e3),e=setInterval((()=>{window.Intercom&&(window.Intercom("show"),window.tolstoyWidget.hide(),clearInterval(e),clearTimeout(t),window.Intercom("onHide",(()=>{window.tolstoyWidget.show()})))}))},[n.PLAYER_EVENT_NAMES.openTawkTo]:()=>{window.Tawk_API&&(window.Tawk_API.maximize(),window.tolstoyWidget.hide())},[n.PLAYER_EVENT_NAMES.openLiveChat]:()=>{window.LiveChatWidget&&(window.LiveChatWidget.call("maximize"),window.tolstoyWidget.hide())},[n.PLAYER_EVENT_NAMES.openHubSpot]:()=>{window.HubSpotConversations&&window.HubSpotConversations.widget&&(window.HubSpotConversations.widget.open(),window.tolstoyWidget.hide())},[n.PLAYER_EVENT_NAMES.openDrift]:()=>{window.drift&&(window.drift.api.toggleChat(),window.tolstoyWidget.hide())},[n.PLAYER_EVENT_NAMES.openZendesk]:()=>{window.zE&&(window.zE("messenger","open"),document.querySelector('[title="Button to launch messaging window"]')?.style?.setProperty("display","block"),window.tolstoyWidget.hide())},[n.PLAYER_EVENT_NAMES.openHelpScout]:()=>{window.Beacon&&(window.Beacon("open"),window.tolstoyWidget.hide(),window.Beacon("config",{display:{zIndex:"99999"}}))},[I]:()=>{window.fcWidget&&(window.fcWidget.show(),window.fcWidget.open(),window.tolstoyWidget.hide())},[N]:()=>{if(!d&&window.Reamaze?.popup)return window.Reamaze.popup(),void window.tolstoyWidget.hide();window._support&&d&&window.Reamaze?.reload&&(window._support.ui=d,window.Reamaze.reload(),d=null,window.tolstoyWidget.hide())},[_]:()=>{window.adaEmbed&&(window.adaEmbed.toggle(),window.tolstoyWidget.hide())},[b]:()=>{window.tidioChatApi&&(window.tidioChatApi.show(),window.tidioChatApi.open(),window.tolstoyWidget.hide())},[C]:t=>{if(window.certainly)switch(window.certainly.widgetStatus({action:"open"}),window.tolstoyWidget.hide(),t.data.key){case"PmkMI":window.certainly.goTo({module:"670442"});break;case"_23Hl":window.certainly.goTo({module:"670178"});break;case"P9rfq":window.certainly.goTo({module:"670179"})}}},O={[n.PLAYER_EVENT_NAMES.hideGorgias]:()=>{window.GorgiasChat&&(window.GorgiasChat.close?.(),document.head.insertAdjacentHTML("beforeend","<style>#gorgias-chat-container iframe#chat-button { visibility: hidden; display: none; }</style>"))},[n.PLAYER_EVENT_NAMES.hideIntercom]:()=>{const t=setTimeout((()=>clearInterval(e)),9e3),e=setInterval((()=>{window.Intercom&&(window.Intercom("update",{hide_default_launcher:!0}),clearInterval(e),clearTimeout(t))}),100)},[n.PLAYER_EVENT_NAMES.hideTawkTo]:function(){window.Tawk_API&&window.Tawk_API.hideWidget()},[n.PLAYER_EVENT_NAMES.hideLiveChat]:function(){window.LiveChatWidget&&window.LiveChatWidget.call("hide")},[n.PLAYER_EVENT_NAMES.hideHubSpot]:function(){window.HubSpotConversations&&window.HubSpotConversations.widget&&window.HubSpotConversations.widget.close()},[n.PLAYER_EVENT_NAMES.hideDrift]:()=>{window.drift&&window.drift.api.widget.hide()},[n.PLAYER_EVENT_NAMES.hideZendesk]:()=>{const t=setTimeout((()=>clearInterval(e)),5e3),e=setInterval((()=>{const o=document.querySelector('[title="Button to launch messaging window"]'),n=document.querySelector('[title="Message from company"]');o?.style?.setProperty("display","none"),n?.parentElement?.style?.setProperty("display","none"),o&&n&&(clearInterval(e),clearTimeout(t))}),100);window.zE&&window.zE("messenger","close")},[n.PLAYER_EVENT_NAMES.hideHelpScout]:()=>{window.Beacon&&window.Beacon("config",{display:{zIndex:"0"}})},[y]:()=>{window.fcWidget&&(window.fcWidget.close(),window.fcWidget.hide(),window.tolstoyWidget.show())},[m]:()=>{window._support?.ui&&window.Reamaze?.reload&&(d=window._support.ui,delete window._support.ui,window.Reamaze.reload(),window.tolstoyWidget.show())},[w]:()=>{document.head.insertAdjacentHTML("beforeend","<style>#ada-button-frame { display: none; }</style>")},[R]:()=>{T("#vfChat+div"),T("#vfChat+div+div")},[A]:()=>{window.tidioChatApi&&window.tidioChatApi.close()},[v]:()=>{window.certainly&&window.certainly.widgetStatus({action:"hide"})}}})),s.register("6MJM3",(function(e,o){t(e.exports,"getBaseUrl",(function(){return c})),t(e.exports,"getImageUrlByStep",(function(){return l})),t(e.exports,"setVideoSourceOnEnd",(function(){return d}));var n=s("e8kzi"),r=s("kq83N"),i=s("j2c9o"),a=s("iG8TK");const c=({step:t,isStory:e,isPlayInTileFirst:o,height:s=a.DEFAULT_TILE_HEIGHT,isTile:r})=>{const{videoOwner:i,stockAsset:c,videoId:l}=t,d=(({isMobile:t,isStory:e,isPlayInTileFirst:o,isTile:n})=>o||n?"_640.mp4":t||e?"_preview.mp4":"_preview_embed.mp4")({isMobile:window.innerWidth<=450,isStory:e,isPlayInTileFirst:o,isTile:r}),u=c?.videoUrl,p=Boolean(c?.shopifyFileId),E=c?.previewUrl,g=c?.hasOriginal,h=c?.gifUrl,S=p&&!g;if(E&&!o&&s<480&&!r)return E;if(u&&p)return u;if(u&&!p){if(u?.includes("vimeo"))return u;return`${u.split(".mp4")[0]}${d}`}if(h&&S){return`${h.split(".mp4")[0]}${d}`}return(0,n.buildUrl)({ownerId:i,assetId:l,extension:d})},l=(t,e,o=r.IMAGE_DIMENSIONS["480x480"])=>{const s=window.innerWidth<=450?i.WEBP_AVATAR_EXTENSION:i.WEBP_EXTENSION;return(0,n.getImageUrl)({step:t,extension:s,posterSettings:e,size:o})},d=(t,e)=>{t.addEventListener("ended",(()=>{t.autoplay?t.src="":t.src=e}),{once:!0})}})),s.register("e8kzi",(function(e,o){t(e.exports,"buildUrl",(function(){return i})),t(e.exports,"getPosterUrlFromStockAsset",(function(){return a})),t(e.exports,"getImageUrl",(function(){return c}));var n=s("2Aomz"),r=s("kq83N");const i=({path:t=`${n.VIDEO_OUTPUT}/public`,ownerId:e="",assetId:o="",suffix:s="",extension:r=""})=>`${t}/${e}/${o}/${o}${s}${r}`,a=t=>t?.shopifyPosterUrl||t?.posterUrl,c=({step:t,extension:e,posterSettings:o,size:s=r.IMAGE_DIMENSIONS["250x250"],custom:a={condition:"",callback:""},path:c=`${n.VIDEO_OUTPUT}/public`})=>{const{videoOwner:l,videoId:d,stockAsset:u={},mediaAssets:p}=t;if(!d)return"";const{avatarUrl:E,posterUrl:g,hasOriginal:h,shopifyPosterUrl:S}=u||{},{shopifyAttributes:f={},shopifySpotlightAttributes:T={}}=o||{},y={...f,...T},I=Boolean(Object.keys(y)?.length),m=S&&o?.useShopifyPoster&&I;if(p&&p?.images&&p?.images[s]&&!m)return p.images[s];const N=!h&&(E||g);if(S){let t="width=300";if(o?.useShopifyPoster){t=new URLSearchParams(y).toString()}return`${S}&${t}`}return g?.endsWith(e)||g&&!h?g:a?.condition&&a?.callback&&a.condition({posterUrl:g,avatarUrl:E,extension:e,isDuplicated:N})?a.callback(u):g||i({path:c,ownerId:l,assetId:d,extension:e})}})),s.register("kq83N",(function(e,o){t(e.exports,"DEFAULT_IMAGE_EXTENSION",(function(){return n})),t(e.exports,"ASSET_TYPE",(function(){return s})),t(e.exports,"IMAGE_SIZE",(function(){return r})),t(e.exports,"IMAGE_SIZE_SUFFIX",(function(){return i})),t(e.exports,"IMAGE_DIMENSIONS",(function(){return a}));const n=".webp",s={VIDEO:"video",IMAGE:"image",GALLERY:"gallery"},r={XS:250,S:480,M:960,L:1280,XL:1920},i={[r.XS]:"_250",[r.S]:"_480",[r.M]:"_960",[r.L]:"_1280",[r.XL]:"_1920"},a={"250x140":"250x140","250x250":"250x250","480x480":"480x480","960x540":"960x540"}})),s.register("j2c9o",(function(e,o){t(e.exports,"WEBP_AVATAR_EXTENSION",(function(){return n})),t(e.exports,"WEBP_EXTENSION",(function(){return s})),t(e.exports,"JPG_AVATAR_EXTENSION",(function(){return r})),t(e.exports,"JPG_EXTENSION",(function(){return i}));const n=".avatar.0000000.webp",s=".401.0000000.webp",r=".avatar.0000000.jpg",i=".0000000.jpg"})),s.register("4Epjr",(function(t,e){t.exports=s("1rN27")(s("2372k").getBundleURL("fWNwr")+s("jHnDr").resolve("jzpb5")).then((()=>s("2apiB")))})),s.register("1rN27",(function(t,e){"use strict";var o=s("JNMYe");t.exports=o((function(t){return new Promise((function(e,o){var n=document.getElementsByTagName("script");if([].concat(n).some((function(e){return e.src===t})))e();else{var s=document.createElement("link");s.href=t,s.rel="preload",s.as="script",document.head.appendChild(s);var r=document.createElement("script");r.async=!0,r.type="text/javascript",r.src=t,r.onerror=function(e){var n=new TypeError("Failed to fetch dynamically imported module: ".concat(t,". Error: ").concat(e.message));r.onerror=r.onload=null,r.remove(),o(n)},r.onload=function(){r.onerror=r.onload=null,e()},document.getElementsByTagName("head")[0].appendChild(r)}}))}))})),s.register("JNMYe",(function(t,e){"use strict";var o={},n={},s={};t.exports=function(t,e){return function(r){var i=function(t){switch(t){case"preload":return n;case"prefetch":return s;default:return o}}(e);return i[r]?i[r]:i[r]=t.apply(null,arguments).catch((function(t){throw delete i[r],t}))}}})),s.register("2372k",(function(e,o){var n;t(e.exports,"getBundleURL",(function(){return n}),(function(t){return n=t}));var s={};function r(t){return(""+t).replace(/^((?:https?|file|ftp|(chrome|moz|safari-web)-extension):\/\/.+)\/[^/]+$/,"$1")+"/"}n=function(t){var e=s[t];return e||(e=function(){try{throw new Error}catch(e){var t=(""+e.stack).match(/(https?|file|ftp|(chrome|moz|safari-web)-extension):\/\/[^)\n]+/g);if(t)return r(t[2])}return"/"}(),s[t]=e),e}})),s.register("gwsJJ",(function(t,e){t.exports=s("1rN27")(s("2372k").getBundleURL("fWNwr")+s("jHnDr").resolve("89rZX")).then((()=>s("hdNOp")))})),s.register("9N0sc",(function(t,e){t.exports=Promise.all([s("1rN27")(s("2372k").getBundleURL("fWNwr")+s("jHnDr").resolve("kAKKR")),s("1rN27")(s("2372k").getBundleURL("fWNwr")+s("jHnDr").resolve("3BP7W")),s("1rN27")(s("2372k").getBundleURL("fWNwr")+s("jHnDr").resolve("4qgX3")),s("9FDC1")(s("2372k").getBundleURL("fWNwr")+s("jHnDr").resolve("6pTxy")),s("9FDC1")(s("2372k").getBundleURL("fWNwr")+s("jHnDr").resolve("lMy7v")),s("1rN27")(s("2372k").getBundleURL("fWNwr")+s("jHnDr").resolve("34FYC"))]).then((()=>s("2LevF")))})),s.register("9FDC1",(function(t,e){"use strict";var o=s("JNMYe");t.exports=o((function(t){return new Promise((function(e,o){var n=document.getElementsByTagName("link");if([].concat(n).some((function(e){return e.href===t&&e.rel.indexOf("stylesheet")>-1})))e();else{var s=document.createElement("link");s.rel="stylesheet",s.href=t,s.onerror=function(t){s.onerror=s.onload=null,s.remove(),o(t)},s.onload=function(){s.onerror=s.onload=null,e()},document.getElementsByTagName("head")[0].appendChild(s)}}))}))})),s.register("d3uwV",(function(t,e){t.exports=Promise.all([s("1rN27")(s("2372k").getBundleURL("fWNwr")+s("jHnDr").resolve("kAKKR")),s("1rN27")(s("2372k").getBundleURL("fWNwr")+s("jHnDr").resolve("4qgX3")),s("9FDC1")(s("2372k").getBundleURL("fWNwr")+s("jHnDr").resolve("goDnC")),s("9FDC1")(s("2372k").getBundleURL("fWNwr")+s("jHnDr").resolve("lMy7v")),s("1rN27")(s("2372k").getBundleURL("fWNwr")+s("jHnDr").resolve("l1VTG"))]).then((()=>s("8EN4e")))})),s.register("apBdR",(function(t,e){t.exports=Promise.all([s("1rN27")(s("2372k").getBundleURL("fWNwr")+s("jHnDr").resolve("kAKKR")),s("9FDC1")(s("2372k").getBundleURL("fWNwr")+s("jHnDr").resolve("eeTkm")),s("1rN27")(s("2372k").getBundleURL("fWNwr")+s("jHnDr").resolve("jiIH5"))]).then((()=>s("2IbOs")))})),s.register("fzA3x",(function(t,e){t.exports=Promise.all([s("1rN27")(s("2372k").getBundleURL("fWNwr")+s("jHnDr").resolve("nhvAq")),s("1rN27")(s("2372k").getBundleURL("fWNwr")+s("jHnDr").resolve("hEbxp")),s("9FDC1")(s("2372k").getBundleURL("fWNwr")+s("jHnDr").resolve("fJxnv")),s("1rN27")(s("2372k").getBundleURL("fWNwr")+s("jHnDr").resolve("lCIdQ"))]).then((()=>s("a0Gsc")))})),s.register("6YNBC",(function(t,e){t.exports=Promise.all([s("9FDC1")(s("2372k").getBundleURL("fWNwr")+s("jHnDr").resolve("l37kV")),s("1rN27")(s("2372k").getBundleURL("fWNwr")+s("jHnDr").resolve("6mZ8R"))]).then((()=>s("li39R")))})),s.register("a78DZ",(function(e,o){t(e.exports,"default",(function(){return r}));var n=s("eSOI5");var r=class{addHours(t,e=new Date){return e.setTime(e.getTime()+36e5*t),e}getTolstoyViewers(){const t=(0,n.getTolstoyViewers)();for(const[e,o]of Object.entries(t)){const n=o.restrictionLimits;if(!n)continue;!!n?.time&&new Date(n?.time)<=new Date&&delete t[e].restrictionLimits}const e=JSON.stringify(t);return(0,n.setTolstoyViewers)(t),e}updateRestrictions(t,e){const o=(0,n.getTolstoyViewers)(),s=o[e]?.restrictionLimits;if(!s||s?.type!==t)return;const r=s[t];s[t]=r?r+1:1,s.limit&&s.clickLimit===s[t]&&(s.time=this.addHours(s?.limit)),o[e].restrictionLimits=s,(0,n.setTolstoyViewers)(o)}updateRules(t){const e=t?.publishId||void 0,o=t?.limit,s=(0,n.getTolstoyViewers)();let r=s[e];const i=r?.restrictionLimits;r?r.impressionCount+=1:r={impressionCount:1,playCount:0};let a=s.undefined;if(a?a.impressionCount+=1:a={impressionCount:1,playCount:0},o){let t={limit:Number(o.timeLimit),type:o.type,clickLimit:Number(o.clickLimit)};i&&(t={...i,...t}),r.restrictionLimits=t}else i&&(r.restrictionLimits=null);s[e]=r,s.undefined=a,(0,n.setTolstoyViewers)(s)}}})),s.register("7Tj0o",(function(e,o){t(e.exports,"default",(function(){return s}));class n{static isValidUrl(t){if(!t)return!1;if(t.startsWith("tel:")||t.startsWith("mailto:"))return!0;return null!==t.match(/(http(s)?:\/\/.)?(www\.)?[-a-zA-Z0-9@:%._+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_+.~#?&//=]*)/g)}static isAndroid(){return navigator.userAgent.toLowerCase().indexOf("android")>-1}static isInIframe(){try{return window.self!==window.top}catch(t){return!0}}static isIos(){return/iPad|iPhone|iPod/.test(navigator.platform)||"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1}static getMobileOperatingSystem(){const t=navigator.userAgent||navigator.vendor||window.opera;return/windows phone/i.test(t)?"Windows Phone":/android/i.test(t)?"Android":/iPad|iPhone|iPod/.test(t)&&!window.MSStream?"iOS":navigator.userAgent.match(/Mac/)&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2?"ipad":null}static isMobile(){return null!=n.getMobileOperatingSystem()}static isSafari(){return void 0!==window.safari}static enforceProtocol(t,e="https"){return t.startsWith("http")||t.startsWith("//")||t.startsWith("tel:")||t.startsWith("mailto:")?t:`${e}://${t}`}static removeProtocol(t){return t.replace(/(^\w+:|^)\/\//,"")}static stripUrl(t){return n.removeProtocol(t).replace(/^www./,"").replace(/\/$/,"")}}var s=n})),s.register("itzoI",(function(t,e){t.exports=Promise.all([s("1rN27")(s("2372k").getBundleURL("fWNwr")+s("jHnDr").resolve("kAKKR")),s("1rN27")(s("2372k").getBundleURL("fWNwr")+s("jHnDr").resolve("4qgX3")),s("9FDC1")(s("2372k").getBundleURL("fWNwr")+s("jHnDr").resolve("lMy7v")),s("1rN27")(s("2372k").getBundleURL("fWNwr")+s("jHnDr").resolve("aKM9X"))]).then((()=>s("4FBx6")))})),s.register("chAKy",(function(t,e){t.exports=Promise.all([s("1rN27")(s("2372k").getBundleURL("fWNwr")+s("jHnDr").resolve("kAKKR")),s("1rN27")(s("2372k").getBundleURL("fWNwr")+s("jHnDr").resolve("4qgX3")),s("9FDC1")(s("2372k").getBundleURL("fWNwr")+s("jHnDr").resolve("cgRMu")),s("9FDC1")(s("2372k").getBundleURL("fWNwr")+s("jHnDr").resolve("lMy7v")),s("1rN27")(s("2372k").getBundleURL("fWNwr")+s("jHnDr").resolve("b9uE3"))]).then((()=>s("9Du8u")))})),s.register("5GzNL",(function(e,o){t(e.exports,"PUBLIC_CLASSES",(function(){return n})),t(e.exports,"TOLSTOY_TV_CONTAINER_ID",(function(){return s})),t(e.exports,"TOLSTOY_TV_ID",(function(){return r})),t(e.exports,"AB_TEST_PUBLISH_IDS",(function(){return i}));const n={tvContainer:"tolstoy-video-page"},s="tolstoy-tv-container",r="tolstoy-tv",i={}})),s.register("e38LN",(function(t,e){t.exports=Promise.all([s("9FDC1")(s("2372k").getBundleURL("fWNwr")+s("jHnDr").resolve("fd1Hc")),s("1rN27")(s("2372k").getBundleURL("fWNwr")+s("jHnDr").resolve("dTIhU"))]).then((()=>s("3c1EV")))})),s.register("kHyIS",(function(e,o){t(e.exports,"EXTERNAL_EVENTS_TO_SUBSCRIBE",(function(){return n})),t(e.exports,"EXTERNAL_EVENTS_TO_POST",(function(){return s})),t(e.exports,"ALLOWED_EXTERNAL_EVENTS_TO_SUBSCRIBE",(function(){return r})),t(e.exports,"ALLOWED_EXTERNAL_EVENTS_TO_POST",(function(){return i}));const n={addToCart:"tolstoy_add_to_cart",spotlightCarouselQuickShopClick:"tolstoy_spotlight_carousel_quick_shop_click",productCardClick:"tolstoy_product_card_click"},s={addToCartSuccess:"tolstoy_add_to_cart_success",addToCartError:"tolstoy_add_to_cart_error",rejectCookiePolicy:"tolstoy_reject_cookie_policy",tolstoyZIndexChange:"tolstoy_z_index_change",urlLocaleUpdate:"tolstoy_url_locale_update",productUpdate:"tolstoy_product_update"},r=Object.values(n),i=new Set([s.addToCartSuccess,s.addToCartError,s.rejectCookiePolicy,s.tolstoyZIndexChange,s.urlLocaleUpdate,s.productUpdate])})),s.register("k6zg1",(function(e,o){t(e.exports,"getIsBaseCurrency",(function(){return n})),t(e.exports,"isShopifyCdnUrl",(function(){return s}));const n=()=>1===Number(window.Shopify?.currency?.rate),s=t=>"string"==typeof t&&t.includes("cdn.shopify.com")})),s.register("4dQPj",(function(e,o){t(e.exports,"default",(function(){return g}));var n=s("aEodP"),r=s("8ptJJ"),i=s("519R9"),a=s("e3391");const c={},l={},d={},u=[];class p{constructor(){if(p.instance)return p.instance;p.instance=this}registerIframe({modalId:t,modalIframe:e}){c[t]=e}postInternalMessage({modalId:t,data:e}){delete e.modalId;const o=i.default.postMessage(e);d[o]=t}handleModalMessagingReady({modalId:t}){l[t]=!0;const e=c[t];for(const o of u){const{transmissionId:n}=o,s=d[n];(!s||s===t)&&this.postMessageToIframe({iframe:e,message:o})}}eventHandler=({data:t={}})=>{const{modalId:e,eventName:o}=t;if(e)switch(o){case n.INTERNAL_EVENTS.addToCart:case n.INTERNAL_EVENTS.openRebuyCart:case n.INTERNAL_EVENTS.openKendoModal:case n.INTERNAL_EVENTS.getProductsMetafields:case n.INTERNAL_EVENTS.productCardClick:case n.INTERNAL_EVENTS.loginWithMultipassUrlRequest:case n.INTERNAL_EVENTS.cartItemQuantityChange:case n.INTERNAL_EVENTS.cartDataRequest:case n.INTERNAL_EVENTS.productRecommendationsRequest:case n.INTERNAL_EVENTS.requestProductsUpdate:case n.INTERNAL_EVENTS.moveToUrl:case n.INTERNAL_EVENTS.showFeedProductModal:case n.INTERNAL_EVENTS.reportModalOpen:case n.INTERNAL_EVENTS.reportModalClose:case r.TOLSTOY_PLAYER_READY_MESSAGE:return this.postInternalMessage({modalId:e,data:t});case n.INTERNAL_EVENTS.modalMessagingReady:return this.postInternalMessage({modalId:e,data:t}),this.handleModalMessagingReady({modalId:e});case n.INTERNAL_EVENTS.toggleFeedCloseButton:return this.postInternalMessage({modalId:e,data:t});default:return null}};internalEventHandler=({data:t})=>{this.postMessageToModal(t)};postMessageToIframe({iframe:t,message:e}){t.contentWindow?.postMessage(e,"*")}postMessageToAllIframes({message:t}){u.push(t);for(const[e,o]of Object.entries(c)){l[e]&&this.postMessageToIframe({iframe:o,message:t})}}postMessageToModal(t){const{transmissionId:e,shouldEndTransmission:o=!0,...n}=t,s=d[e];if(!s)return this.postMessageToAllIframes({message:n});if(!l[s])return void u.push(t);const r=c[s];this.postMessageToIframe({iframe:r,message:n}),o&&delete d[e]}initInternalMessagingSubscriptions=()=>{i.default.subscribeMultipleEvents({eventNames:a.INTERNAL_MESSAGES_TO_SUBSCRIBE,callback:this.internalEventHandler})};init(){this.initInternalMessagingSubscriptions(),window.addEventListener("message",this.eventHandler)}}const E=new p;Object.freeze(E);var g=E})),s.register("e3391",(function(e,o){t(e.exports,"INTERNAL_MESSAGES_TO_SUBSCRIBE",(function(){return r}));var n=s("aEodP");const r=[n.INTERNAL_EVENTS.addToCartError,n.INTERNAL_EVENTS.addToCartSuccess,n.INTERNAL_EVENTS.addToCartSoldOut,n.INTERNAL_EVENTS.isRebuyAppInstalled,n.INTERNAL_EVENTS.isAfterpayAppInstalled,n.INTERNAL_EVENTS.openRebuyCart,n.INTERNAL_EVENTS.returnProductsMetafields,n.INTERNAL_EVENTS.rejectCookiePolicy,n.INTERNAL_EVENTS.productCardClickSubscribed,n.INTERNAL_EVENTS.isTapcart,n.INTERNAL_EVENTS.urlLocaleUpdate,n.INTERNAL_EVENTS.loginWithMultipassUrlResponse,n.INTERNAL_EVENTS.cartDataResponse,n.INTERNAL_EVENTS.cartItemQuantityChangeSuccess,n.INTERNAL_EVENTS.cartItemQuantityChangeError,n.INTERNAL_EVENTS.productRecommendationsResponse,n.INTERNAL_EVENTS.productUpdateResponse,n.INTERNAL_EVENTS.isNonBaseCurrency,n.INTERNAL_EVENTS.eventListenersInitialized]})),s("jHnDr").register(JSON.parse('{"fWNwr":"widget.js","jzpb5":"widget.events.js","89rZX":"carousel-loader.js","izN8B":"carousel-skeleton.js","aKVry":"CarouselSkeleton.20cb8af5.css","b0NRL":"CarouselSkeleton.2cb9768a.js","5ZVWt":"CarouselSkeleton.56cbb320.js","hEbxp":"CarouselSkeleton.b817b4ec.js","dj7hR":"carousel.js","lMy7v":"Carousel.19215827.css","4qgX3":"Carousel.1a8f7dcf.js","3BP7W":"Carousel.ec1994b3.js","kAKKR":"Carousel.f61c0c99.js","2SjbV":"spotlight-carousel-controller.js","dq6jt":"SpotlightCarouselController.2e97bad3.css","nhvAq":"SpotlightCarouselController.5e36cdbc.js","34FYC":"story.js","6pTxy":"Story.1c91a7f8.css","l1VTG":"embed.js","goDnC":"Embed.ef1b534e.css","jiIH5":"tile.js","eeTkm":"Tile.e0252811.css","lCIdQ":"collection-tile-controller.js","fJxnv":"CollectionTileController.da591779.css","6mZ8R":"collection-page-tile-controller.js","l37kV":"CollectionPageTileController.104ab420.css","aKM9X":"centered-modal.js","b9uE3":"bubble.js","cgRMu":"Bubble.ce5c787e.css","dTIhU":"t-v.js","fd1Hc":"TV.986f6c5b.css"}'));var r=s("aQK74");const i={PDP_CAROUSEL:"pdp-carousel",VIDEO_PAGE:"video-page"},a={HEADER:"header",HEADER_AND_BOTTOM_NAVBAR:"header-and-bottom-navbar",CUSTOM_SCREEN:"custom-screen",CUSTOM_SCREEN_AND_BOTTOM_NAVBAR:"custom-screen-and-bottom-navbar"},c=t=>document.documentElement.style.setProperty("height",`${t}px`,"important"),l=t=>navigator.userAgent.toLowerCase().includes("android")?(t=>{const e=window.screen.availHeight,o=window.Tapcart.variables.device.windowHeight;switch(t){case a.HEADER:case a.HEADER_AND_BOTTOM_NAVBAR:return o;case a.CUSTOM_SCREEN:return e-100;case a.CUSTOM_SCREEN_AND_BOTTOM_NAVBAR:return e-184;default:return o||e}})(t):(t=>{const e=window.screen.availHeight,o=window.Tapcart.variables.device.windowHeight;switch(t){case a.HEADER:return o;case a.HEADER_AND_BOTTOM_NAVBAR:return o-75;case a.CUSTOM_SCREEN:return e-90;case a.CUSTOM_SCREEN_AND_BOTTOM_NAVBAR:return e-175;default:return o||e}})(t),d=(t,e)=>{const o=l(e.navType);c(o)},u=t=>`\n    <style>\n      .tolstoy-video-page iframe {\n        display: block !important;\n      }\n    </style>\n    <tolstoy-video-page\n      id="tolstoy-tv-container"\n      class="tolstoy-video-page"\n      data-publish-id="${t}"\n    ></tolstoy-video-page>\n  `,p=(t,e)=>{c(0),((t={})=>{const{height:e=490}=t;let o=0;const n=setInterval((function(){o++;const t=document.querySelector(".tolstoy-carousel-container"),s=document.querySelector(".tolstoy-carousel");t&&s?(s.style.display="block",c(e),clearInterval(n)):o>=50&&clearInterval(n)}),200)})(e)},E=t=>{const e=window?.Tapcart?.variables?.product?.id;return`\n    <style>\n      * {\n        box-sizing: border-box;\n        padding: 0;\n        margin: 0;\n        font-family: Helvetica;\n      }\n      \n      .tolstoy-carousel iframe {\n        display: block !important;\n      }\n    </style>\n    <tolstoy-carousel\n      class="tolstoy-carousel"\n      data-publish-id="${t}"\n      style="display: none"\n      ${e?`data-product-id="${e}"`:""}\n    ></tolstoy-carousel>\n  `},g=async(t,e)=>{switch(e.blockType){case i.PDP_CAROUSEL:p(0,e);break;case i.VIDEO_PAGE:d(0,e)}},h=async()=>{const t=document.querySelectorAll("tolstoy-block");if(0!==t.length)for(const e of Array.from(t)){const{publishId:t,blockType:o,navType:n,height:s}=e.dataset||{},r={blockType:o,navType:n,height:s};let a="";switch(o){case i.PDP_CAROUSEL:a=E(t);break;case i.VIDEO_PAGE:a=u(t)}a&&(e.outerHTML=a,g(0,r))}};var S=s("xb7kn"),f=s("2Aomz"),T=s("kCbDV"),y=s("ljwIw"),I=s("lY4N9"),m=(T=s("kCbDV"),s("fgRdL")),N=s("2S3LN");const w="data-status",_=[T.COLLECTION_TILE_EMBED_WIDGET],A="loading",b="loaded",v="notFound";var C=class{constructor({name:t,component:e,elementClassname:o}){this.name=t,this.Component=e,this.widgets=[],this.initialized=!1,this.elementClassname=o}async init(){const t=this.getElements();if(0!==t.length){for(const e of t)if(this.getShouldInitializeElement(e)){this.setElementStatus(e,A);try{const t=new this.Component;if(await t.init(e),!t.getIsInitialized()){this.deleteElementStatus(e);continue}this.widgets.push(t),this.initializeEvents({element:e,widget:t}),this.setElementStatus(e,b)}catch(t){this.setElementStatus(e,v),console.log(`error starting  tolstoy ${this.name}`,e.id,t)}}this.widgets.length>0&&(this.initialized=!0)}}deleteElementStatus(t){t.removeAttribute(w)}getElementStatus(t){return t.getAttribute(w)}getIsTolstoyPreview(){return window.tolstoyPreview}getIsElementHidden(t){return"none"===window.getComputedStyle(t)?.display||!t.offsetParent}setElementStatus(t,e){return t.setAttribute(w,e)}getShouldInitializeElement(t){return!(!t.classList.contains(m.PUBLIC_CLASS)||this.getElementStatus(t))||(!this.getElementStatus(t)&&!this.getIsElementHidden(t)||!this.getElementStatus(t)&&(0,I.getIsTapcart)()||this.getIsTolstoyPreview())}setComponent(t){this.Component=t}getElements(){if(_.includes(this.name))return[document.querySelector(`.${this.elementClassname}`)].filter(Boolean);return document.querySelectorAll(`.${this.elementClassname}`)}shouldLoad(){return this.getElements().length>0}initializeEvents({element:t,widget:e}){e.handlePageView?.(),this.registerEmbedViewListener({element:t,callback:e.handleView,outOfViewCallback:e.handleOutOfView})}registerEmbedViewListener({element:t,callback:e,outOfViewCallback:o}){(0,N.getIsElementVisible)({element:t})&&(e(),!o)||(({element:t,callback:e,outOfViewCallback:o})=>{const n=new window.IntersectionObserver((s=>{!0===s[0].isIntersecting&&s[0].intersectionRatio>.9?(o||n.unobserve(t),e()):s[0].intersectionRatio<.1&&o?.()}),{threshold:[.1,.9]});n.observe(t)})({element:t,callback:e,outOfViewCallback:o})}},R=s("519R9"),L=s("aEodP");let O=!1;const P=async()=>{if(O)return;(await s("4Epjr")).initializeWidgetEvents(),O=!0};var x=class{constructor(){this.domUpdatesListenerInitialized=!1,this.widgets=[],this.embedWidgetsMap={}}async init(){const t=[];for(const e of[T.CAROUSEL_EMBED_WIDGET,T.STORY_EMBED_WIDGET,T.EMBED_WIDGET,T.TILE_EMBED_WIDGET,T.COLLECTION_TILE_EMBED_WIDGET,T.COLLECTION_PAGE_TILE_EMBED_WIDGET]){const o=T.EMBED_WIDGETS_CLASSNAMES[e],n=new C({name:e,elementClassname:o});this.embedWidgetsMap[e]={embedWidget:n,loaded:!1},t.push(o)}this.registerDomUpdatesListenerIfNeeded(t),this.subscribeToUrlChange(),await this.loadEmbedWidgets()}loadEmbedWidgets=async()=>{const t=Object.entries(this.embedWidgetsMap).map((async([t,{embedWidget:e,loaded:o,loading:n}])=>{e.shouldLoad()&&(n?setTimeout((()=>this.loadEmbedWidgets()),2e3):(o||await this.loadEmbedWidget({embedWidgetName:t,embedWidget:e}),await e.init()))}));await Promise.all(t)};async loadEmbedWidget({embedWidgetName:t,embedWidget:e}){let o;switch(this.embedWidgetsMap[t].loading=!0,t){case T.CAROUSEL_EMBED_WIDGET:o=await s("gwsJJ");break;case T.STORY_EMBED_WIDGET:o=await s("9N0sc");break;case T.EMBED_WIDGET:o=await s("d3uwV");break;case T.TILE_EMBED_WIDGET:o=await s("apBdR");break;case T.COLLECTION_TILE_EMBED_WIDGET:o=await s("fzA3x");break;case T.COLLECTION_PAGE_TILE_EMBED_WIDGET:o=await s("6YNBC")}e.setComponent(o.default),await P(),this.embedWidgetsMap[t].loaded=!0,this.embedWidgetsMap[t].loading=!1}registerDomUpdatesListenerIfNeeded(t){if(this.domUpdatesListenerInitialized)return;(0,y.registerDomUpdatesListener)({classNames:t,callback:()=>this.loadEmbedWidgets()}),this.domUpdatesListenerInitialized=!0}handleUrlChange=()=>{for(const t of Object.keys(this.embedWidgetsMap))this.embedWidgetsMap[t].loaded=!1;this.loadEmbedWidgets()};subscribeToUrlChange(){R.default.subscribe({eventName:L.INTERNAL_EVENTS.urlChange,callback:this.handleUrlChange})}},M=s("eSOI5");T=s("kCbDV"),M=s("eSOI5");const D=(T=s("kCbDV")).BUBBLE_WIDGET,U=new Set(["5bzilmwoe1fon","z7uu0kcyzumt0"]),V=t=>U.has(t)?T.CENTERED_MODAL_WIDGET:D;const k=(t,e)=>t.find((t=>t.name===e));var B=class{constructor(){this.initialized=!1,this.widgets=[],this.start=this.start.bind(this),this.startPart=this.startPart.bind(this),this.hide=this.hide.bind(this),this.show=this.show.bind(this),this.on=this.on.bind(this),this.recreate=this.recreate.bind(this),window.tolstoyWidget={...window.tolstoyWidget,start:this.start,startPart:this.startPart,show:this.show,hide:this.hide,on:this.on,recreate:this.recreate}}async init({bubbleSettings:t,widgetId:e,Component:o}){this.bubbleSettings=t;const n=new o(t);await n.init(),this.widgets.push(n),this.updateViewerIdentifyAttributes(),window.tolstoySettings?.noReload||this.registerEvents();const s=window.tolstoySettings?.alwaysShow;if(!s&&"true"===(0,M.getTolstoyHideWidget)(e)||t.exitIntentPublishId)this.hide();else{const t=V(e);this.show(t),this.recreate(e,t)}}updateViewerIdentifyAttributes(){const t=Number((0,M.getSessionCounter)()||0)+1;(0,M.setSessionCounter)(t.toString()),(0,M.getFirstSeenAt)()||(0,M.setFirstSeenAt)((new Date).toISOString())}handleMouseDown(){this.userInteracted=!0,document.removeEventListener("mousedown",this.handleMouseDown)}registerEvents(){document.addEventListener("mousedown",(()=>{this.handleMouseDown()})),document.body.addEventListener("mouseleave",(async()=>{const t=this.bubbleSettings?.exitIntentPublishId;if(t&&this.userInteracted){const e=this.widgets.find((t=>t?.bubbleSettings?.exitIntentPublishId));e&&await this.recreate(t,e.name,{startPlayerImmediately:!0})}}))}start(t=D){const e=k(this.widgets,t);e&&e.start()}startPart(t,e=D){const o=k(this.widgets,e);o&&o.startPart(t)}hide(t=D){const e=k(this.widgets,t);e&&e.hide()}show(t=D){const e=k(this.widgets,t);e&&e.show()}on(t,e,o=D){const n=k(this.widgets,o);n&&n.eventChange(t,e)}recreate(t,e=D,o={}){const n=k(this.widgets,e);n&&n.recreate(t,o)}},H=s("a78DZ"),W=s("6QfcD"),F=s("izL3O"),Y=s("7Tj0o"),$=s("kK0IS"),j=s("i1NbZ"),K=($=s("kK0IS"),W=s("6QfcD"),s("k3iEx")),G=s("93NPo");H=s("a78DZ"),F=s("izL3O");class z{constructor(){if(z.instance)return z.instance;z.instance=this,this.appKey=(0,W.getAppKey)(),this.shop=window.Shopify?.shop||(0,F.getShop)(),this.accountSettings=null,this.rules=new(0,H.default),this.shouldUseCache=null,this.cacheVersion=null,this.hasLiveBubble=null}async init(){if(this.appKey||this.shop){if(this.accountSettings)return this.accountSettings;try{this.accountSettings=await(0,$.getAccountSettings)(),this.rules.updateRules(this.accountSettings);(this.accountSettings?.shouldUseCache||(0,j.getShouldUseCache)())&&(window.tolstoySettings=window.tolstoySettings||{},window.tolstoySettings.shouldUseCache=!0);const t=this.accountSettings?.cacheVersion||(0,j.getCacheVersion)();return t&&(window.tolstoySettings=window.tolstoySettings||{},window.tolstoySettings.cacheVersion=t),this.hasLiveBubble=this.accountSettings?.hasLiveBubble||Boolean(window.tolstoyWidgetId)||(0,K.getTolstoyAutoOpen)(),this.accountSettings}catch(t){return(0,G.logDevelopmentError)("Error loading account settings",t),null}}}}var q=new z;R=s("519R9"),L=s("aEodP");var X=class{constructor(){this.account=q,this.rules=new(0,H.default),this.appKey=(0,W.getAppKey)()}getBubbleSettings=async()=>{const t=window.location.href,e=window.Shopify?.shop||(0,F.getShop)();if(!this.appKey&&!e)return;const o=(0,M.getIdentifyInfoId)(),n=this.rules.getTolstoyViewers(),s=e||window.location.host,r={timestamp:Date.now(),url:t,sessionCount:Number((0,M.getSessionCounter)()||0),lastSeenAt:(new Date).toISOString(),firstSeenAt:(0,M.getFirstSeenAt)(),tolstoySeenCounter:n,isMobile:Y.default.isMobile(),domain:s,appUrl:e,appKey:this.appKey};o&&(r.identifyInfoId=o);try{const t=await(0,$.getBubbleSettings)(r);return t?(this.rules.updateRules(t),t):null}catch{return null}};init=async()=>{if(!this.account?.hasLiveBubble)return;const t=await this.getBubbleSettings();this.subscribeToUrlChange();const e=window.tolstoyWidgetId||t?.publishId||t?.exitIntentPublishId;if(!e)return void this.widget?.hide?.();const o=window.tolstoySettings?.alwaysShow;if(!o&&"true"===(0,M.getTolstoyHideWidget)(e))return;const n=V(e);let r;n===T.CENTERED_MODAL_WIDGET?r=await s("itzoI"):n===T.BUBBLE_WIDGET&&(r=await s("chAKy")),await P(),this.widget?(this.widget.recreate(e,n),this.widget.show()):(this.widget=new B,await this.widget.init({bubbleSettings:t,widgetId:e,Component:r.default}))};handleUrlChange=()=>{this.unsubscribeFromUrlChange(),this.init()};subscribeToUrlChange(){R.default.subscribe({eventName:L.INTERNAL_EVENTS.urlChange,callback:this.handleUrlChange})}unsubscribeFromUrlChange(){R.default.unsubscribe({eventName:L.INTERNAL_EVENTS.urlChange,callback:this.handleUrlChange})}},Z=s("5GzNL");y=s("ljwIw");var Q=class{constructor(){this.domUpdatesListenerInitialized=!1,this.loaded=!1}async init(){await this.loadVideo(),this.loaded||this.registerDomUpdatesListenerIfNeeded()}async loadVideo(){const t=document.querySelector(`#${Z.TOLSTOY_TV_CONTAINER_ID}`);if(!t)return;new(0,(await s("e38LN")).default)({tolstoyContainer:t}).init(),this.loaded=!0}registerDomUpdatesListenerIfNeeded(){if(this.domUpdatesListenerInitialized)return;const t=[Z.PUBLIC_CLASSES.tvContainer];(0,y.registerDomUpdatesListener)({classNames:t,callback:()=>this.loadVideo()}),this.domUpdatesListenerInitialized=!0}};const J=[(L=s("aEodP")).INTERNAL_EVENTS.urlChange];r=s("aQK74"),L=s("aEodP");const tt=t=>t.data.eventName===L.INTERNAL_EVENTS.urlChange?(0,r.sendPageVisitEvent)():null;W=s("6QfcD");const et=["(+https://whatis.contentkingapp.com)","Shopify-Observe-Synthetic-Checks","+http://www.google.com/bot.html","https://naver.me/spd","HeadlessChrome","(+http://www.facebook.com/externalhit_uatext.php)","Bytespider","bot"];var ot=s("dEa8z"),nt=s("kHyIS");L=s("aEodP"),R=s("519R9"),nt=s("kHyIS");const st=({eventName:t,callback:e})=>{if(nt.ALLOWED_EXTERNAL_EVENTS_TO_SUBSCRIBE.includes(t))if(e){if("function"==typeof e)return!0;console.error("Callback must be a function")}else console.error("Callback must be provided");else console.error(`Event ${t} is not a valid event`)};class rt extends ot.default{constructor(){if(rt.instance)return rt.instance;super({shouldIncludeLogs:!0}),rt.instance=this}eventHandler=({data:t={}})=>{const{eventName:e}=t;if(this.eventCallbacks[e])for(const o of this.eventCallbacks[e])try{o(t)}catch(t){console.error(t)}};subscribe=(t,e,o={})=>{if(st({eventName:t,callback:e}))try{super.subscribe({eventName:t,callback:e}),R.default.postMessage({eventName:L.INTERNAL_EVENTS.externalEventSubscribed,subscribedEventName:t,payload:o});const n=new CustomEvent("TOLSTOY_WIDGET_V2_SUBSCRIBE",{detail:{eventName:t,payload:o,callback:e}});window.dispatchEvent(n),console.log("Subscribed to event",t)}catch(t){console.error(t)}};unsubscribe=(t,e)=>super.unsubscribe({eventName:t,callback:e});initInternalMessagingSubscriptions=()=>{R.default.subscribeMultipleEvents({eventNames:nt.ALLOWED_EXTERNAL_EVENTS_TO_SUBSCRIBE,callback:this.eventHandler})};init(){this.initInternalMessagingSubscriptions(),this.initListener(this.eventHandler)}}const it=new rt;Object.freeze(it);var at=it;W=s("6QfcD"),$=s("kK0IS"),L=s("aEodP"),nt=s("kHyIS"),R=s("519R9"),M=s("eSOI5");const ct=new class{postMessage=(t={})=>{(t=>{const{eventName:e}=t;if(e){if(nt.ALLOWED_EXTERNAL_EVENTS_TO_POST.has(e))return!0;console.error(`${e} is not a valid eventName`)}else console.error("eventName is required")})(t)&&R.default.postMessage(t)};closePlayer(){R.default.postMessage({eventName:L.INTERNAL_EVENTS.closePlayer})}changeEmail(t){window.tolstoyUser=t,R.default.postMessage({eventName:L.INTERNAL_EVENTS.userEmailUpdate,email:t})}async identify(t={}){const{email:e,userId:o}=t;if(e||o)try{e&&this.changeEmail(e),o&&(t.userId=o.toString()),t.appKey=(0,W.getAppKey)();const n=await(0,$.postUserIdentification)(t);(0,M.setIdentifyInfoId)(n?.id)}catch(t){console.error("Error occurred while updating identify info:",t),window.tolstoyCaptureError?.(t,"Error occurred while updating identify info:"),(0,M.removeIdentifyInfoId)()}else console.error("No email or userId")}};Object.freeze(ct);var lt=ct;R=s("519R9"),L=s("aEodP"),R=s("519R9");const dt=[(nt=s("kHyIS")).EXTERNAL_EVENTS_TO_POST.urlLocaleUpdate];L=s("aEodP"),nt=s("kHyIS"),R=s("519R9");const ut=({data:t})=>{if(t.eventName!==nt.EXTERNAL_EVENTS_TO_POST.urlLocaleUpdate)return null;{const{payload:e}=t;R.default.postMessage({eventName:L.INTERNAL_EVENTS.urlLocaleUpdate,urlLocale:e.urlLocale})}};class pt{constructor(){if(pt.instance)return pt.instance;pt.instance=this}initExternalMessagingSubscriptions(){R.default.subscribeMultipleEvents({eventNames:dt,callback:ut})}init(){this.initExternalMessagingSubscriptions();const t=window.history.pushState,e=window.history.replaceState;let o=window.location.href;const n=()=>{window.location.href!==o&&(o=window.location.href,R.default.postMessage({eventName:L.INTERNAL_EVENTS.urlChange}))};window.history.pushState=function(){t.apply(window.history,arguments),n()},window.history.replaceState=function(){e.apply(window.history,arguments),n()}}}const Et=new pt;Object.freeze(Et);var gt=Et;L=s("aEodP"),R=s("519R9");const ht=[(L=s("aEodP")).INTERNAL_EVENTS.modalOpen];const St=new class{sendIsAfterpayAppInstalledMessage(){R.default.postMessage({eventName:L.INTERNAL_EVENTS.isAfterpayAppInstalled,value:Boolean(window?.Afterpay)})}internalMessagingHandler=t=>{if(t.data.eventName!==L.INTERNAL_EVENTS.modalOpen)return null;this.sendIsAfterpayAppInstalledMessage()};initInternalMessagingSubscriptions(){R.default.subscribeMultipleEvents({eventNames:ht,callback:this.internalMessagingHandler})}init(){this.initInternalMessagingSubscriptions()}};Object.freeze(St);var ft=St,Tt=(nt=s("kHyIS"),R=s("519R9"),s("lxjfR")),yt=s("hlJEM");L=s("aEodP"),R=s("519R9");const It=[nt.EXTERNAL_EVENTS_TO_POST.rejectCookiePolicy];class mt{constructor(){if(mt.instance)return mt.instance;mt.instance=this}externalMessagingHandler=t=>t.data.eventName===nt.EXTERNAL_EVENTS_TO_POST.rejectCookiePolicy?((0,Tt.removeAllTolstoyKeysFromStorage)(),(0,Tt.setCookiePolicy)(yt.COOKIE_POLICIES.rejected),void R.default.postMessage({eventName:L.INTERNAL_EVENTS.rejectCookiePolicy})):null;initExternalMessagingSubscriptions=()=>{R.default.subscribeMultipleEvents({eventNames:It,callback:this.externalMessagingHandler})};init(){this.initExternalMessagingSubscriptions()}}const Nt=new mt;Object.freeze(Nt);var wt=Nt;nt=s("kHyIS"),R=s("519R9"),L=s("aEodP");const _t={itemSoldOut:"itemSoldOut"},At={tolstoyAnonymousId:"__tolstoyAnonymousId"};nt=s("kHyIS"),L=s("aEodP"),R=s("519R9");const bt=({data:t})=>{const{description:e}=t,o=(({description:t})=>t===_t.itemSoldOut?L.INTERNAL_EVENTS.addToCartSoldOut:L.INTERNAL_EVENTS.addToCartError)({description:e});R.default.postMessage({...t,eventName:o})},vt=({data:t})=>{const{variantId:e,productId:o,transmissionId:n,quantity:s,productHandle:r,templateSuffix:i}=t;R.default.postMessage({variantId:e,productId:o,transmissionId:n,quantity:s,productHandle:r,eventName:nt.EXTERNAL_EVENTS_TO_SUBSCRIBE.addToCart,templateSuffix:i})},Ct=({data:t})=>{const{product:e,transmissionId:o}=t;R.default.postMessage({product:e,transmissionId:o,eventName:nt.EXTERNAL_EVENTS_TO_SUBSCRIBE.spotlightCarouselQuickShopClick})},Rt=({data:t})=>{const{subscribedEventName:e,payload:o={}}=t,{disableDefault:n}=o;switch(e){case nt.EXTERNAL_EVENTS_TO_SUBSCRIBE.addToCart:case nt.EXTERNAL_EVENTS_TO_SUBSCRIBE.spotlightCarouselQuickShopClick:n&&R.default.postMessage({eventName:L.INTERNAL_EVENTS.addToCartDisableDefault});break;default:return null}},Lt=({data:t})=>{R.default.postMessage({...t,eventName:L.INTERNAL_EVENTS.addToCartSuccess})},Ot=[L.INTERNAL_EVENTS.addToCart,L.INTERNAL_EVENTS.spotlightCarouselQuickShopClick,L.INTERNAL_EVENTS.externalEventSubscribed],Pt=[nt.EXTERNAL_EVENTS_TO_POST.addToCartSuccess,nt.EXTERNAL_EVENTS_TO_POST.addToCartError];class xt{constructor(){if(xt.instance)return xt.instance;xt.instance=this}internalMessagingHandler=t=>{switch(t.data.eventName){case L.INTERNAL_EVENTS.addToCart:return vt(t);case L.INTERNAL_EVENTS.spotlightCarouselQuickShopClick:return Ct(t);case L.INTERNAL_EVENTS.externalEventSubscribed:return Rt(t);default:return null}};externalMessagingHandler=t=>{switch(t.data.eventName){case nt.EXTERNAL_EVENTS_TO_POST.addToCartSuccess:return Lt(t);case nt.EXTERNAL_EVENTS_TO_POST.addToCartError:return bt(t);default:return null}};initInternalMessagingSubscriptions=()=>{R.default.subscribeMultipleEvents({eventNames:Ot,callback:this.internalMessagingHandler})};initExternalMessagingSubscriptions=()=>{R.default.subscribeMultipleEvents({eventNames:Pt,callback:this.externalMessagingHandler})};init(){this.initInternalMessagingSubscriptions(),this.initExternalMessagingSubscriptions()}}const Mt=new xt;Object.freeze(Mt);var Dt=Mt;R=s("519R9");const Ut=[(L=s("aEodP")).INTERNAL_EVENTS.externalEventSubscribed,L.INTERNAL_EVENTS.productCardClick];nt=s("kHyIS"),L=s("aEodP"),R=s("519R9");const Vt=({data:t})=>{const{eventName:e}=t;switch(e){case L.INTERNAL_EVENTS.externalEventSubscribed:{const{subscribedEventName:e,payload:o}=t;(({subscribedEventName:t,payload:e})=>{switch(t){case nt.EXTERNAL_EVENTS_TO_SUBSCRIBE.productCardClick:{const{disableProductModal:t=!0}=e;R.default.postMessage({eventName:L.INTERNAL_EVENTS.productCardClickSubscribed,isDisableProductModal:t});break}default:;}})({subscribedEventName:e,payload:o});break}case L.INTERNAL_EVENTS.productCardClick:{const{variantId:e,productId:o,externalProductIds:n,productHandle:s}=t;R.default.postMessage({eventName:nt.EXTERNAL_EVENTS_TO_SUBSCRIBE.productCardClick,variantId:e,productId:o,taggedProductIds:n,productHandle:s});break}default:return null}};const kt=new class{initInternalMessagingSubscriptions(){R.default.subscribeMultipleEvents({eventNames:Ut,callback:Vt})}init(){this.initInternalMessagingSubscriptions()}};Object.freeze(kt);var Bt=kt;R=s("519R9"),L=s("aEodP");const Ht=[(L=s("aEodP")).INTERNAL_EVENTS.getProductsMetafields];const Wt=new class{getProductsMetafields(t=[]){const e={};for(const o of t)e[o]=window?.metafields?.products?.[o];return e}internalMessagingHandler=({data:t})=>{if(t.eventName!==L.INTERNAL_EVENTS.getProductsMetafields)return null;t?.productIds?.length&&R.default.postMessage({productsExtraData:this.getProductsMetafields(t.productIds),modalId:t.modalId,eventName:L.INTERNAL_EVENTS.returnProductsMetafields})};initInternalMessagingSubscriptions(){R.default.subscribeMultipleEvents({eventNames:Ht,callback:this.internalMessagingHandler})}init(){this.initInternalMessagingSubscriptions()}};Object.freeze(Wt);var Ft=Wt;L=s("aEodP"),R=s("519R9");const Yt=[(L=s("aEodP")).INTERNAL_EVENTS.openRebuyCart],$t={show:"rebuy:smartcart.show",hide:"rebuy:smartcart.hide",init:"rebuy:smartcart.init"};const jt=new class{sendIsRebuyAppInstalledMessage=()=>{window?.Rebuy?.SmartCart?(R.default.postMessage({eventName:L.INTERNAL_EVENTS.isRebuyAppInstalled,value:Boolean(window?.Rebuy?.SmartCart)}),this.initRebuyEventListeners()):document.addEventListener($t.init,this.sendIsRebuyAppInstalledMessage,{once:!0})};internalMessagingHandler=t=>t.data.eventName===L.INTERNAL_EVENTS.openRebuyCart?window?.Rebuy?.SmartCart?.show():null;initInternalMessagingSubscriptions(){R.default.subscribeMultipleEvents({eventNames:Yt,callback:this.internalMessagingHandler})}initRebuyEventListeners(){document.addEventListener($t.show,(()=>{R.default.postMessage({eventName:L.INTERNAL_EVENTS.rebuyCartShown})})),document.addEventListener($t.hide,(()=>{R.default.postMessage({eventName:L.INTERNAL_EVENTS.rebuyCartHidden})}))}init(){this.initInternalMessagingSubscriptions(),this.sendIsRebuyAppInstalledMessage()}};Object.freeze(jt);var Kt=jt;L=s("aEodP"),R=s("519R9");const Gt=[(L=s("aEodP")).INTERNAL_EVENTS.openKendoModal];const zt=new class{internalMessagingHandler=t=>{if(t.data.eventName!==L.INTERNAL_EVENTS.openKendoModal)return null;{R.default.postMessage({eventName:L.INTERNAL_EVENTS.changeZIndex,zIndex:1e3}),window.KENDO?.openQuickModalByHandle?.(t.data.productHandle);const e=t.data.quantity;if(e<=1)return;for(let t=1;t<e;t++)setTimeout((()=>{const t=document.querySelector(".quantity-selector__action--increment");t?.click?.()}),1e3+150*t)}};initInternalMessagingSubscriptions(){R.default.subscribeMultipleEvents({eventNames:Gt,callback:this.internalMessagingHandler})}init(){this.initInternalMessagingSubscriptions()}};Object.freeze(zt);var qt=zt;L=s("aEodP"),R=s("519R9"),I=s("lY4N9"),$=s("kK0IS"),W=s("6QfcD"),L=s("aEodP"),R=s("519R9"),I=s("lY4N9");const Xt=[(L=s("aEodP")).INTERNAL_EVENTS.addToCart,L.INTERNAL_EVENTS.playerReady,L.INTERNAL_EVENTS.productCardClick],Zt={cartUpdated:"cart/updated"},Qt=({productId:t,variantId:e})=>{const o={productId:String(t)};return e&&(o.variantId=String(e)),window.Tapcart.actions.openProduct(o)},Jt=async t=>{const{variantId:e,productId:o}=t;try{(t=>{const e=setTimeout((()=>{R.default.postMessage({...t,eventName:L.INTERNAL_EVENTS.addToCartError})}),4e3);window.Tapcart.registerEventHandler(Zt.cartUpdated,(()=>{clearTimeout(e),R.default.postMessage({...t,eventName:L.INTERNAL_EVENTS.addToCartSuccess})}))})(t),window.Tapcart.actions.addToCart({lineItems:[{variantId:String(e||o),quantity:1}]})}catch(e){return R.default.postMessage({...t,error:e,eventName:L.INTERNAL_EVENTS.addToCartError})}},te=()=>{try{const t=(0,I.getTapcartDeviceId)();if(!t)return;const e=[...window?.Tapcart?.variables?.cart?.attributes||[],{key:At.tolstoyAnonymousId,value:t}];window?.Tapcart?.actions?.updateCartAttributes?.({attributes:e})}catch(t){(0,$.createPlayerEvent)({text:t?.message,parentUrl:window.location.href,appKey:(0,W.getAppKey)(),source:"tapcart",eventName:"widgetError",timestamp:(new Date).toISOString()})}};const ee=new class{disableCartDefault(){R.default.postMessage({eventName:L.INTERNAL_EVENTS.addToCartDisableDefault})}internalMessagingHandler=t=>{switch(t.data.eventName){case L.INTERNAL_EVENTS.playerReady:return this.disableCartDefault();case L.INTERNAL_EVENTS.productCardClick:return Qt(t.data);case L.INTERNAL_EVENTS.addToCart:return Jt(t.data);default:return null}};initInternalMessagingSubscriptions(){R.default.subscribeMultipleEvents({eventNames:Xt,callback:this.internalMessagingHandler})}init(){(0,I.getIsTapcart)()&&(this.initInternalMessagingSubscriptions(),te())}};Object.freeze(ee);var oe=ee;y=s("ljwIw"),K=s("k3iEx"),I=s("lY4N9"),L=s("aEodP");const ne={USD:"$",CAD:"CA$",EUR:"€",AED:"د.إ.‏",AFN:"؋",ALL:"Lek",AMD:"դր.",ARS:"$",AUD:"AU$",AZN:"ман.",BAM:"KM",BDT:"৳",BGN:"лв.",BHD:"د.ب.‏",BIF:"FBu",BND:"$",BOB:"Bs",BRL:"R$",BWP:"P",BYN:"руб.",BZD:"$",CDF:"FrCD",CHF:"CHF",CLP:"$",CNY:"CN¥",COP:"$",CRC:"₡",CVE:"CV$",CZK:"Kč",DJF:"Fdj",DKK:"kr",DOP:"RD$",DZD:"د.ج.‏",EEK:"kr",EGP:"ج.م.‏",ERN:"Nfk",ETB:"Br",GBP:"£",GEL:"GEL",GHS:"GH₵",GNF:"FG",GTQ:"Q",HKD:"$",HNL:"L",HRK:"kn",HUF:"Ft",IDR:"Rp",ILS:"₪",INR:"₹",IQD:"د.ع.‏",IRR:"﷼",ISK:"kr",JMD:"$",JOD:"د.أ.‏",JPY:"￥",KES:"Ksh",KHR:"៛",KMF:"FC",KRW:"₩",KWD:"د.ك.‏",KZT:"тңг.",LBP:"ل.ل.‏",LKR:"SL Re",LTL:"Lt",LVL:"Ls",LYD:"د.ل.‏",MAD:"د.م.‏",MDL:"MDL",MGA:"MGA",MKD:"MKD",MMK:"K",MOP:"MOP$",MUR:"MURs",MXN:"MX$",MYR:"RM",MZN:"MTn",NAD:"N$",NGN:"₦",NIO:"C$",NOK:"kr",NPR:"नेरू",NZD:"$",OMR:"ر.ع.‏",PAB:"B/.",PEN:"S/.",PHP:"₱",PKR:"₨",PLN:"zł",PYG:"₲",QAR:"ر.ق.‏",RON:"RON",RSD:"дин.",RUB:"₽.",RWF:"FR",SAR:"ر.س.‏",SDG:"SDG",SEK:"kr",SGD:"$",SOS:"Ssh",SYP:"ل.س.‏",THB:"฿",TND:"د.ت.‏",TOP:"T$",TRY:"TL",TTD:"$",TWD:"NT$",TZS:"TSh",UAH:"₴",UGX:"USh",UYU:"$",UZS:"UZS",VEF:"Bs.F.",VND:"₫",XAF:"FCFA",XOF:"CFA",YER:"ر.ي.‏",ZAR:"R",ZMK:"ZK",ZWL:"ZWL$"};W=s("6QfcD"),M=s("eSOI5"),T=s("kCbDV"),R=s("519R9"),G=s("93NPo");var se=s("k6zg1");L=s("aEodP");const re={soldOut:"already sold out",sellingPlanRequired:"Variant can only be purchased with a selling plan."},ie=[L.INTERNAL_EVENTS.addToCartDisableDefault,L.INTERNAL_EVENTS.setAnonymousIdToCart,L.INTERNAL_EVENTS.loginWithMultipassUrlRequest,L.INTERNAL_EVENTS.cartItemQuantityChange,L.INTERNAL_EVENTS.cartDataRequest,L.INTERNAL_EVENTS.productRecommendationsRequest,L.INTERNAL_EVENTS.requestProductsUpdate,L.INTERNAL_EVENTS.blockAnonymousIdToCart],ae=[L.INTERNAL_EVENTS.addToCart,L.INTERNAL_EVENTS.spotlightCarouselQuickShopClick],ce=t=>({headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify(t)});let le=!1,de=!1;const ue={},pe={};class Ee{constructor(){if(Ee.instance)return Ee.instance;Ee.instance=this,this.isShopifyStore=Boolean(window.Shopify?.shop&&window.Shopify?.routes),this.storeRootUrl=window.Shopify?.routes?.root}getIsProductSoldOutError(t){return t.includes(re.soldOut)}getIsSellingPlanError(t){return t.includes(re.sellingPlanRequired)}formatProduct(t){if(!t)return null;const e=window.Shopify?.currency?.active||window.Shopify?.currency,o=window.tolstoyCurrencySymbol||ne[e];return{...t,id:String(t.id),price:t.price/100,compare_at_price:t.compare_at_price?t.compare_at_price/100:t.compare_at_price,currencyCode:e,currencySymbol:o,variants:t.variants.map((t=>({...t,price:t.price/100,compare_at_price:t.compare_at_price?t.compare_at_price/100:t.compare_at_price})))}}async fetchRawProduct(t){const e=this.storeRootUrl+`products/${t}.js`;try{const t=await fetch(e),o=await t.json();return this.formatProduct(o)}catch{}}getProduct=async t=>{if(ue[t])return ue[t];if(pe[t])return pe[t];const e=this.fetchRawProduct(t);pe[t]=e;const o=await e;return ue[t]=o,delete pe[t],o};onRequestProductsUpdateMessage=async({handles:t})=>{const e=[...new Set(t)].map((t=>this.getProduct(t))),o=(await Promise.all(e)).filter(Boolean);for(const t of o)R.default.postMessage({eventName:L.INTERNAL_EVENTS.productUpdateResponse,product:t})};async handleSellingPlanError(t,e){const o=await this.getProduct(e);if(!o)return;const{id:n}=o.selling_plan_groups[0].selling_plans[0];return this.shopifyAddToCart({variantId:t,productHandle:e,sellingPlanId:n})}handleAddToCartError({error:t,variantId:e,productHandle:o,transmissionId:n}){const{description:s}=t;if(!this.getIsProductSoldOutError(s))return this.getIsSellingPlanError(s)?this.handleSellingPlanError(e,o):void R.default.postMessage({eventName:L.INTERNAL_EVENTS.addToCartError,error:s,variantId:e,transmissionId:n});R.default.postMessage({eventName:L.INTERNAL_EVENTS.addToCartSoldOut,variantId:e,transmissionId:n})}handleUpdateItemQuantityError({error:t,variantId:e,transmissionId:o}){const{description:n}=t;R.default.postMessage({eventName:L.INTERNAL_EVENTS.cartItemQuantityChangeError,error:n,variantId:e,transmissionId:o})}async getCart({transmissionId:t}){try{const e=await fetch(`${this.storeRootUrl}cart.js`,{method:"GET"}),o=await e.json();R.default.postMessage({eventName:L.INTERNAL_EVENTS.cartDataResponse,cart:o,transmissionId:t})}catch{}}triggerExternalCartUpdate(){window.VueMiniCart?.$store?._actions?.initCart?.[0]?.(),window.slate?.cart?.reloadCart?.(),window.tolstoyCartRefresh?.(),window.monster_refresh?.(),window.updateMiniCart?.()}disableAddToCart(){le=!0,R.default.unsubscribeMultipleEvents({eventNames:ae,callback:this.internalMessagingHandler})}postUrlLocaleUpdateIfNeeded(){"/"!==window.Shopify?.routes?.root&&R.default.postMessage({eventName:L.INTERNAL_EVENTS.urlLocaleUpdate,urlLocale:window.Shopify?.routes?.root})}postIsNonBaseCurrencyIfNeeded(){(0,se.getIsBaseCurrency)()||R.default.postMessage({eventName:L.INTERNAL_EVENTS.isNonBaseCurrency})}shopifyQuickShopClick({product:t}){const{variants:e,handle:o,quantity:n=1}=t,s=e[0].id;return this.shopifyAddToCart({variantId:s,productHandle:o,quantity:n})}shopifyAddToCart=async({variantId:t,productHandle:e,sellingPlanId:o,quantity:n=T.DEFAULT_CART_QUANTITY,transmissionId:s})=>{const r={};de||(r._isAddedFromTolstoy=!0);const i={id:t,quantity:n,properties:r};o&&(i.selling_plan=o);const a=ce({items:[i]});try{const o=await fetch(`${this.storeRootUrl}cart/add.js`,a);if(!o.ok){const n=await o.json();return this.handleAddToCartError({error:n,variantId:t,productHandle:e,transmissionId:s})}this.triggerExternalCartUpdate(),R.default.postMessage({eventName:L.INTERNAL_EVENTS.addToCartSuccess,variantId:t,transmissionId:s,shouldEndTransmission:!1}),this.getCart({transmissionId:s})}catch(o){console.log(o),this.handleAddToCartError({error:o,variantId:t,productHandle:e,transmissionId:s})}};shopifyUpdateItemQuantity=async({variantId:t,quantity:e,transmissionId:o})=>{const n=ce({updates:{[t]:e}});try{const e=await fetch(`${this.storeRootUrl}cart/update.js`,n);if(!e.ok){const n=await e.json();return this.handleUpdateItemQuantityError({error:n,variantId:t,transmissionId:o})}this.triggerExternalCartUpdate(),R.default.postMessage({eventName:L.INTERNAL_EVENTS.cartItemQuantityChangeSuccess,variantId:t,transmissionId:o,shouldEndTransmission:!1}),this.getCart({transmissionId:o})}catch(e){this.handleUpdateItemQuantityError({error:e,variantId:t,transmissionId:o})}};async getProductRecommendations({productId:t,transmissionId:e}){const o=`${this.storeRootUrl}recommendations/products.json?product_id=${t}`;try{const n=await fetch(o,{method:"GET"}),{products:s}=await n.json();R.default.postMessage({eventName:L.INTERNAL_EVENTS.productRecommendationsResponse,productId:t,products:s,transmissionId:e})}catch{}}async loginWithMultipassUrl({multipassUrl:t,transmissionId:e}){try{const o=await fetch(t);R.default.postMessage({eventName:L.INTERNAL_EVENTS.loginWithMultipassUrlResponse,statusCode:o.status,transmissionId:e})}catch{}}async setAnonymousIdToCart({anonymousId:t}){if("true"===(0,M.getIsShopifyCartAnonymousIdSet)()||de)return;const e=ce({attributes:{[At.tolstoyAnonymousId]:t}});try{await fetch(`${this.storeRootUrl}cart/update.js`,e),(0,M.setIsShopifyCartAnonymousIdSet)(!0)}catch(t){console.error(t)}}async blockAnonymousIdToCart({appKey:t}){const e=(0,M.getTolstoyInteractionDate)(t);(0,G.isNullOrUndefined)(e)||await this.setAnonymousIdToCart({anonymousId:null}),de=!0}forceClearAnonymousIdFromCart(){if("mlt-boutique.myshopify.com"!==window.Shopify?.shop)return;const t=(0,W.getAppKey)();t&&this.blockAnonymousIdToCart({appKey:t})}internalMessagingHandler=t=>{switch(t.data.eventName){case L.INTERNAL_EVENTS.addToCart:return this.shopifyAddToCart(t.data);case L.INTERNAL_EVENTS.spotlightCarouselQuickShopClick:return this.shopifyQuickShopClick(t.data);case L.INTERNAL_EVENTS.addToCartDisableDefault:return this.disableAddToCart(t.data);case L.INTERNAL_EVENTS.blockAnonymousIdToCart:return this.blockAnonymousIdToCart(t.data);case L.INTERNAL_EVENTS.setAnonymousIdToCart:return this.setAnonymousIdToCart(t.data);case L.INTERNAL_EVENTS.loginWithMultipassUrlRequest:return this.loginWithMultipassUrl(t.data);case L.INTERNAL_EVENTS.cartItemQuantityChange:return this.shopifyUpdateItemQuantity(t.data);case L.INTERNAL_EVENTS.cartDataRequest:return this.getCart(t.data);case L.INTERNAL_EVENTS.productRecommendationsRequest:return this.getProductRecommendations(t.data);case L.INTERNAL_EVENTS.requestProductsUpdate:return this.onRequestProductsUpdateMessage(t.data);default:return null}};initInternalMessagingSubscriptions=()=>{R.default.subscribeMultipleEvents({eventNames:ie,callback:this.internalMessagingHandler}),le?(0,G.logDevelopmentMessage)("Add to cart disabled"):R.default.subscribeMultipleEvents({eventNames:ae,callback:this.internalMessagingHandler})};init(){this.isShopifyStore&&(this.initInternalMessagingSubscriptions(),this.postUrlLocaleUpdateIfNeeded(),this.postIsNonBaseCurrencyIfNeeded(),this.forceClearAnonymousIdFromCart())}}const ge=new Ee;Object.freeze(ge);var he=ge;L=s("aEodP"),R=s("519R9");const Se=(t="")=>t.replace("_","-");const fe=[(L=s("aEodP")).INTERNAL_EVENTS.openCommerceSettingsUpdate,L.INTERNAL_EVENTS.requestProductsUpdate],Te={},ye={};var Ie=new class{constructor(){this.isOpenCommerceStore=Boolean(window.CQuotient),this.siteId=window.CQuotient?.siteId,this.locale=Se(window.CQuotient?.locale),this.apiBaseUrl="",this.clientId="",this.currencyCode=window.pageContext?.ecommerce?.currencyCode}fetchProduct=async t=>{const e=`${this.apiBaseUrl}/products/${t}`,o=new URL(e);o.searchParams.append("client_id",this.clientId),o.searchParams.append("locale",this.locale),o.searchParams.append("currency",this.currencyCode),o.searchParams.append("expand","prices");try{const t=await fetch(o),e=await t.json();return{id:(n=e).id,price:n.price,compareAtPrice:n.price,currencyCode:n.currency,currencySymbol:ne[n.currency],variants:[{price:n.price,compareAtPrice:n.price}]}}catch(t){console.error("Error fetching product price",t)}var n};getProduct=async t=>{if(Te[t])return Te[t];if(ye[t])return ye[t];const e=this.fetchProduct(t);ye[t]=e;const o=await e;return Te[t]=o,delete ye[t],o};onRequestProductsUpdateMessage=async({productIds:t})=>{const e=[...new Set(t)].map((t=>this.getProduct(t))),o=(await Promise.all(e)).filter(Boolean);for(const t of o)R.default.postMessage({eventName:L.INTERNAL_EVENTS.productUpdateResponse,product:t})};postUrlLocaleUpdateIfNeeded(t){this.locale!==t&&R.default.postMessage({eventName:L.INTERNAL_EVENTS.urlLocaleUpdate,urlLocale:this.locale})}postIsNonBaseCurrencyIfNeeded(t){this.currencyCode!==t&&R.default.postMessage({eventName:L.INTERNAL_EVENTS.isNonBaseCurrency,currencyCode:this.currencyCode})}onOpenCommerceSettingsUpdate({openCommerceSettings:t}){const{apiVersion:e,clientId:o,baseLocale:n,baseCurrency:s}=t;this.apiBaseUrl=`https://${window.location.host}/s/${this.siteId}/dw/shop/${e}`,this.clientId=o,this.postUrlLocaleUpdateIfNeeded(n),this.postIsNonBaseCurrencyIfNeeded(s)}internalMessagingHandler=t=>{switch(t.data.eventName){case L.INTERNAL_EVENTS.openCommerceSettingsUpdate:return this.onOpenCommerceSettingsUpdate(t.data);case L.INTERNAL_EVENTS.requestProductsUpdate:return this.onRequestProductsUpdateMessage(t.data);default:return null}};initInternalMessagingSubscriptions(){R.default.subscribeMultipleEvents({eventNames:fe,callback:this.internalMessagingHandler})}init(){this.isOpenCommerceStore&&this.initInternalMessagingSubscriptions()}};R=s("519R9");const me=[(nt=s("kHyIS")).EXTERNAL_EVENTS_TO_POST.productUpdate],Ne=["id","descriptionHtml","description_html","variants","price","compare_at_price","title"],we=["id","price","compare_at_price","title"];R=s("519R9"),L=s("aEodP"),nt=s("kHyIS");const _e=({product:t})=>{const e=Object.keys(t).filter((t=>!(t=>Ne.includes(t))(t)));var o;t.variants&&e.push(...(o=t.variants,Array.isArray(o)?o.flatMap(((t,e)=>{const o=Object.keys(t).filter((t=>!we.includes(t)));return 0===o.length?[]:`variants[${e}]: { ${o.join(", ")} }`})):["variants (must be an array)"])),e.length>0?console.error(`Fields ${e.join(", ")} are not supported for product update.`):R.default.postMessage({product:t,eventName:L.INTERNAL_EVENTS.productUpdateResponse})},Ae=({data:t})=>t.eventName===nt.EXTERNAL_EVENTS_TO_POST.productUpdate?_e(t):null;const be=new class{initExternalMessagingSubscriptions(){R.default.subscribeMultipleEvents({eventNames:me,callback:Ae})}init(){this.initExternalMessagingSubscriptions()}};Object.freeze(be);var ve=be;R=s("519R9");const Ce=[(nt=s("kHyIS")).EXTERNAL_EVENTS_TO_POST.addToCartSuccess,nt.EXTERNAL_EVENTS_TO_POST.addToCartError];class Re{constructor(){if(Re.instance)return Re.instance;Re.instance=this}postMessageToWidgetV2=t=>{const{data:e}=t||{},{eventName:o,subscribedEventName:n}=e||{};if(!o&&!n)return;const s=new CustomEvent("TOLSTOY_WIDGET_V2_MESSAGE",{detail:{...e,eventName:n||o}});window.dispatchEvent(s)};initExternalMessagingSubscriptions=()=>{R.default.subscribeMultipleEvents({eventNames:Ce,callback:this.postMessageToWidgetV2})};init(){this.initExternalMessagingSubscriptions()}}const Le=new Re;Object.freeze(Le);var Oe=Le,Pe=s("4dQPj"),xe=Object.assign(Object.create(null),{url:"file:///packages/widget/src/widgets/widgetloader.js"});const Me=()=>(()=>{try{return window.self!==window.top}catch{return!0}})()&&"theordinary.com"===window.location.host,De=async()=>{try{if(window.tolstoyWidget||Me())return;if(et.some((t=>window.navigator.userAgent.includes(t))))return void console.debug("Bot user");if(!Boolean(document.body))return void setTimeout(De,50);if((0,I.getIsTapcart)()&&await h(),"true"===(0,K.getSafeParameter)("td")&&!document.currentScript?.src?.includes?.("/ws/widget.js")&&!xe?.url?.includes?.("/wes/widget.js"))return void(()=>{const t=document.currentScript?.src||xe?.url;t?.includes("/we/widget.js")?(0,y.createScript)({src:`https://${f.WIDGET_DOMAIN}/wes/widget.js`,container:document.head,attributes:{type:"module"}}):(0,y.createScript)({src:`https://${f.WIDGET_DOMAIN}/ws/widget.js`,container:document.head})})();(0,r.registerSiteActivityListenerIfNeeded)(),He(),We(),Fe(),Ye(),$e(),je(),(0,r.sendPageVisitEvent)(),await Ue(),await Promise.all([Ve(),ke(),Be()]),(0,S.tolstoyWidgetReady)()}catch(t){console.log("error",t)}},Ue=async()=>q.init(),Ve=t=>new X(t).init(),ke=()=>(new Q).init(),Be=()=>(new x).init(),He=()=>(R.default.init(),R.default),We=()=>(Pe.default.init(),Pe.default),Fe=()=>{at.init();const{subscribe:t,unsubscribe:e}=at;return window.tolstoyWidget={...window.tolstoyWidget,subscribe:t,unsubscribe:e},at},Ye=()=>{const{postMessage:t,closePlayer:e,identify:o,changeEmail:n}=lt;return window.tolstoyWidget={...window.tolstoyWidget,postMessage:t,closePlayer:e,identify:o,changeEmail:n},lt},$e=()=>{he.init(),gt.init(),Dt.init(),Kt.init(),qt.init(),oe.init(),ft.init(),wt.init(),Bt.init(),Ie.init(),ve.init(),Oe.init(),"8b32dacc-8f1d-4cce-b641-9f60e88f9414"===(0,W.getAppKey)()&&Ft.init()},je=()=>{R.default.subscribeMultipleEvents({eventNames:J,callback:tt})};De()}();